(this.webpackJsonpaladdin=this.webpackJsonpaladdin||[]).push([[0],{336:function(e,t,n){},337:function(e,t,n){},504:function(e,t,n){"use strict";n.r(t);var o,r,i,a,c,s,l,u=n(0),d=n.n(u),h=n(48),j=n.n(h),f=(n(336),n(71)),b=n.n(f),p=n(173),x=n(17),O=(n(337),n(49)),g=n(19),m=n(31),y=n(55),v=n(179),w=n(237),L=n(236),S=n.p+"static/media/weather.55ddf5ca.csv",M=n(286),R=n.n(M),D=n(5),P=n(11),z=n(4),k=function(){function e(){Object(D.a)(this,e)}return Object(P.a)(e,null,[{key:"UNIT_VECTOR_POS_X",get:function(){return new z.Vector3(1,0,0)}},{key:"UNIT_VECTOR_NEG_X",get:function(){return new z.Vector3(-1,0,0)}},{key:"UNIT_VECTOR_POS_Y",get:function(){return new z.Vector3(0,1,0)}},{key:"UNIT_VECTOR_NEG_Y",get:function(){return new z.Vector3(0,-1,0)}},{key:"UNIT_VECTOR_POS_Z",get:function(){return new z.Vector3(0,0,1)}},{key:"UNIT_VECTOR_NEG_Z",get:function(){return new z.Vector3(0,0,-1)}},{key:"isZero",value:function(t){return Math.abs(t)<e.ZERO_TOLERANCE}},{key:"ZERO_TOLERANCE",get:function(){return 1e-4}},{key:"HALF_PI",get:function(){return Math.PI/2}},{key:"TWO_PI",get:function(){return 2*Math.PI}},{key:"copyVector",value:function(e,t){e.x=t.x,e.y=t.y,e.z=t.z}},{key:"setVector",value:function(e,t,n,o){e.x=t,e.y=n,e.z=o}},{key:"copyVector2",value:function(e,t){e.x=t.x,e.y=t.y}},{key:"setVector2",value:function(e,t,n){e.x=t,e.y=n}},{key:"setEuler",value:function(e,t,n,o){e.x=t,e.y=n,e.z=o}},{key:"modelToView",value:function(e){return new z.Vector3(e.x,e.z,-e.y)}},{key:"viewToModel",value:function(e){return new z.Vector3(e.x,-e.z,e.y)}},{key:"toRadians",value:function(e){return e*(Math.PI/180)}},{key:"toDegrees",value:function(e){return e*(180/Math.PI)}},{key:"sphericalToCartesianZ",value:function(e){var t=e.x*Math.cos(e.z),n=t*Math.cos(e.y),o=t*Math.sin(e.y),r=e.x*Math.sin(e.z);return e.set(n,o,r),e}},{key:"getDistance",value:function(t,n,o,r){return t=e.toRadians(t),n=e.toRadians(n),o=e.toRadians(o),r=e.toRadians(r),Math.acos(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(Math.abs(t-o)))}},{key:"daysIntoYear",value:function(t){return e.dayOfYear(new Date(t))}},{key:"dayOfYear",value:function(e){var t=new Date(e.getFullYear(),0,0),n=e.getTime()-t.getTime();return Math.floor(n/864e5)}}]),e}(),T=n(287),C=n(291);Object(O.b)({TextSprite:T.a}),Object(O.b)({OrbitControls:C.a}),function(e){e[e.HourlyTemperatures=0]="HourlyTemperatures",e[e.MonthlyTemperatures=1]="MonthlyTemperatures",e[e.SunshineHours=2]="SunshineHours",e[e.DaylightData=3]="DaylightData",e[e.ClearnessData=4]="ClearnessData",e[e.YearlyRadiationSensorData=5]="YearlyRadiationSensorData",e[e.DailyRadiationSensorData=6]="DailyRadiationSensorData"}(o||(o={})),function(e){e.Default="Default",e.Desert="Desert",e.Grassland="Grassland"}(r||(r={})),function(e){e.Sky="Sky",e.Ground="Ground",e.Foundation="Foundation",e.Sensor="Sensor",e.Cuboid="Cuboid"}(i||(i={})),function(e){e.Select="Select",e.Move="Move",e.Resize="Resize"}(a||(a={})),function(e){e.Lower="Move Handle Lower",e.Upper="Move Handle Upper",e.Left="Move Handle Left",e.Right="Move Handle Right",e.Top="Move Handle Top"}(c||(c={})),function(e){e.LowerLeft="Resize Handle Lower Left",e.UpperLeft="Resize Handle Upper Left",e.LowerRight="Resize Handle Lower Right",e.UpperRight="Resize Handle Upper Right",e.LowerLeftTop="Resize Handle Lower Left Top",e.UpperLeftTop="Resize Handle Upper Left Top",e.LowerRightTop="Resize Handle Lower Right Top",e.UpperRightTop="Resize Handle Upper Right Top"}(s||(s={})),function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Ground="Ground"}(l||(l={}));var U=function(){function e(){Object(D.a)(this,e),this.name=void 0,this.cameraPosition=void 0,this.panCenter=void 0,this.ground=void 0,this.name="default",this.ground={albedo:.3,thermalDiffusivity:.05,snowReflectionFactors:new Array(12).fill(0)},this.panCenter=new z.Vector3(0,0,0),this.cameraPosition=new z.Vector3(0,0,5)}return Object(P.a)(e,[{key:"getElements",value:function(){var e=[],t={type:i.Foundation,cx:0,cy:0,lx:2,ly:3,lz:.1,id:"f1"},n={type:i.Cuboid,cx:0,cy:3,cz:2,lx:2,ly:2,lz:4,id:"c1"},o={type:i.Sensor,cx:2,cy:5,cz:0,lx:.05,ly:.05,lz:.01,normal:[0,0,1],id:"s1",showLabel:!1,light:!0,heatFlux:!1};i.Sensor,i.Sensor;return e.push(t),e.push(n),e.push(o),e}}]),e}();Object(L.b)();var V,E=Object(v.a)(Object(w.devtools)(Object(w.persist)((function(e,t,n){var o=function(t){return e(Object(L.a)(t))},r=new U,i=r.getElements();return{set:o,world:r,elements:i,showGroundPanel:!1,showHeliodonPanel:!1,showWeatherPanel:!1,showDailyLightSensorPanel:!1,showYearlyLightSensorPanel:!1,autoRotate:!1,grid:!1,axes:!0,groundImage:!1,groundColor:"forestgreen",theme:"Default",heliodon:!1,address:"Natick, MA",latitude:42.2844063,longitude:-71.3488548,mapZoom:16,mapType:"roadmap",mapTilt:0,mapWeatherStations:!1,date:new Date(2021,5,22,12).toString(),weatherData:{},timesPerHour:20,yearlyLightSensorData:[],setYearlyLightSensorData:function(e){o((function(t){t.yearlyLightSensorData=Object(y.a)(e)}))},dailyLightSensorData:[],setDailyLightSensorData:function(e){o((function(t){t.dailyLightSensorData=Object(y.a)(e)}))},enableOrbitController:!0,clickObjectType:null,moveHandleType:null,resizeHandleType:null,resizeAnchor:new z.Vector2,getSelectedElement:function(){var e,n=t().elements,o=Object(m.a)(n);try{for(o.s();!(e=o.n()).done;){var r=e.value;if(r.selected)return r}}catch(i){o.e(i)}finally{o.f()}return null},getElementById:function(e){var n,o=t().elements,r=Object(m.a)(o);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.id===e)return i}}catch(a){r.e(a)}finally{r.f()}return null},selectNone:function(){o((function(e){var t,n=Object(m.a)(e.elements);try{for(n.s();!(t=n.n()).done;){t.value.selected=!1}}catch(o){n.e(o)}finally{n.f()}}))},updateElementById:function(e,t){o((function(n){var o,r=Object(m.a)(n.elements.entries());try{for(r.s();!(o=r.n()).done;){var i=Object(x.a)(o.value,2),a=i[0],c=i[1];if(c.id===e){n.elements[a]=Object(g.a)(Object(g.a)({},c),t);break}}}catch(s){r.e(s)}finally{r.f()}}))},setElementPosition:function(e,t,n,r){o((function(o){var i,a=Object(m.a)(o.elements.entries());try{for(a.s();!(i=a.n()).done;){var c=Object(x.a)(i.value,2),s=c[0];if(c[1].id===e){o.elements[s].cx=t,o.elements[s].cy=n,r&&(o.elements[s].cz=r);break}}}catch(l){a.e(l)}finally{a.f()}}))},setElementSize:function(e,t,n,r){o((function(o){var i,a=Object(m.a)(o.elements.entries());try{for(a.s();!(i=a.n()).done;){var c=Object(x.a)(i.value,2),s=c[0];if(c[1].id===e){o.elements[s].lx=t,o.elements[s].ly=n,r&&(o.elements[s].lz=r);break}}}catch(l){a.e(l)}finally{a.f()}}))},loadWeatherData:function(){var e=[];R.a.parse(S,{download:!0,complete:function(t){var n,r=Object(m.a)(t.data);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Array.isArray(i)&&i.length>1){for(var a=[],c=[],s=[],l=5;l<29;l++)(l-5)%2===0?a.push(parseFloat(i[l].trim())):c.push(parseFloat(i[l].trim()));for(var u=29;u<41;u++)s.push(parseFloat(i[u].trim()));var d={city:i[0].trim(),country:i[1].trim(),longitude:parseFloat(i[2].trim()),latitude:parseFloat(i[3].trim()),elevation:parseFloat(i[4].trim()),lowestTemperatures:a,highestTemperatures:c,sunshineHours:s};e.push(d)}}}catch(h){r.e(h)}finally{r.f()}o((function(t){var n,o=Object(m.a)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.weatherData[r.city+", "+r.country]=r}}catch(h){o.e(h)}finally{o.f()}}))}})},getWeather:function(e){return t().weatherData[e]},getClosestCity:function(e,n){var o,r=Number.MAX_VALUE,i=null,a=t().weatherData;for(var c in a)a.hasOwnProperty(c)&&(o=k.getDistance(n,e,a[c].longitude,a[c].latitude))<r&&(r=o,i=c);return i}}}),{name:"aladdin-storage"}))),I=n(1),H=function(e){var t=e.enabled,n=void 0===t||t,o=e.autoRotate,r=void 0!==o&&o,i=e.panCenter,a=void 0===i?new z.Vector3:i,c=e.orbitControlsRef,s=E((function(e){return e.set})),l=Object(O.e)(),d=l.camera,h=l.gl.domElement,j=Object(u.useRef)(null);Object(u.useEffect)((function(){var e=j.current;return e&&(a&&e.target.set(a.x,a.y,a.z),e.addEventListener("end",f),e.update(),c&&(c.current=e)),function(){e&&e.removeEventListener("end",f)}}),[]);var f=function(){s((function(e){var t=e.world;t.cameraPosition.x=d.position.x,t.cameraPosition.y=d.position.y,t.cameraPosition.z=d.position.z,j.current&&(t.panCenter.x=j.current.target.x,t.panCenter.y=j.current.target.y,t.panCenter.z=j.current.target.z)}))};return Object(O.c)((function(e){r&&j.current&&j.current.update()})),Object(I.jsx)("orbitControls",{ref:j,args:[d,h],autoRotate:r,enabled:n,enableRotate:!0,enablePan:!0,enableZoom:!0,enableDamping:!0,target:a,maxAzimuthAngle:1/0,minAzimuthAngle:-1/0,maxPolarAngle:k.HALF_PI,minPolarAngle:0})},A=n(41),F=n.p+"static/media/daysky.66925efd.jpg",W=n.p+"static/media/nightsky.2ee37da6.jpg",Y=n.p+"static/media/desert.e1e10657.jpg",_=n.p+"static/media/desert-night.6f0f274c.jpg",G=n.p+"static/media/grassland.d74bba81.jpg",N=n.p+"static/media/grassland-night.fa2ff11e.jpg",B=function(e){var t=e.theme,n=void 0===t?"Default":t,o=e.night,r=void 0!==o&&o,a=Object(A.a)(e,["theme","night"]),c=E((function(e){return e.set})),s=E((function(e){return e.selectNone})),l=Object(u.useRef)(null),d=Object(u.useMemo)((function(){var e,t=new z.TextureLoader;switch(n){case"Desert":e=t.load(r?_:Y);break;case"Grassland":e=t.load(r?N:G);break;default:e=t.load(r?W:F)}return e}),[n,r]),h=function(e){e.intersections.length>0&&(e.intersections[0].object===l.current&&(s(),c((function(e){e.clickObjectType=i.Sky}))))};return Object(I.jsxs)("mesh",Object(g.a)(Object(g.a)({},a),{},{ref:l,name:"Sky",scale:1,onContextMenu:function(e){h(e)},onClick:function(e){h(e)},children:[Object(I.jsx)("sphereGeometry",{args:[1e3,16,16,0,2*Math.PI,0,Math.PI/2+.01]}),Object(I.jsx)("meshBasicMaterial",{map:d,side:z.BackSide,opacity:1,color:"skyblue"})]}))},X=n(524),Z=function(e){var t=e.lineWidth,n=void 0===t?1:t,o=e.endPoint,r=void 0===o?1e3:o;return Object(I.jsxs)("mesh",{name:"Axes",children:[Object(I.jsx)(X.a,{points:[new z.Vector3(-r,0,0),new z.Vector3(r,0,0)],color:"red",lineWidth:n}),Object(I.jsx)(X.a,{points:[new z.Vector3(0,-r,0),new z.Vector3(0,r,0)],color:"green",lineWidth:n}),Object(I.jsx)(X.a,{points:[new z.Vector3(0,0,-r),new z.Vector3(0,0,r)],color:"blue",lineWidth:n})]})},K=n(292),q=n.p+"static/media/compass.7ded737e.obj",J=n.p+"static/media/helvetiker_regular.typeface.9a3651b4.fnt",Q=function(e){var t=e.scale,n=void 0===t?.01:t,o=Object(A.a)(e,["scale"]),r=Object(O.d)(K.a,q),i=Object(O.d)(z.FontLoader,J),a=Object(u.useRef)(null),c={font:i,height:0,size:.005},s=new z.MeshBasicMaterial({color:"white"}),l=new z.MeshBasicMaterial({color:"red"}),d=Object(O.e)().camera;return Object(O.c)((function(e){if(a.current){var t=new z.Vector3(.88,-.8,.1).unproject(d);a.current.position.set(t.x,t.y,t.z)}})),Object(I.jsxs)("mesh",Object(g.a)(Object(g.a)({},o),{},{ref:a,name:"Compass",rotation:new z.Euler(-Math.PI/2,0,0),children:[Object(I.jsx)("mesh",{position:[-.001,.02,0],material:s,children:Object(I.jsx)("textGeometry",{args:["N",c]})}),Object(I.jsx)("mesh",{position:[-.0015,-.025,0],material:s,children:Object(I.jsx)("textGeometry",{args:["S",c]})}),Object(I.jsx)("mesh",{position:[-.025,-.002,0],material:s,children:Object(I.jsx)("textGeometry",{args:["W",c]})}),Object(I.jsx)("mesh",{position:[.02,-.002,0],material:s,children:Object(I.jsx)("textGeometry",{args:["E",c]})}),Object(I.jsx)("primitive",{object:r,scale:n,material:l})]}))},$=n(509),ee=["#8884d8","#f97356","#1bc32c","#c6502d","#82ca9d","#3eaec0","#627682","#445111"],te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ne=.2,oe=.1,re=.16,ie=function(e){var t=e.id,n=e.cx,o=e.cy,r=e.lx,i=void 0===r?1:r,l=e.ly,d=void 0===l?1:l,h=e.lz,j=void 0===h?.1:h,f=e.color,b=void 0===f?"gray":f,p=e.lineColor,g=void 0===p?"black":p,y=e.lineWidth,v=void 0===y?.2:y,w=e.selected,L=void 0!==w&&w;o=-o;var S=E((function(e){return e.set})),M=Object(O.e)().gl.domElement,R=Object(u.useState)(!1),D=Object(x.a)(R,2),P=D[0],T=D[1],C=Object(u.useState)(null),U=Object(x.a)(C,2),V=U[0],H=U[1],A=Object(u.useRef)(),F=Object(u.useRef)(),W=Object(u.useRef)(),Y=Object(u.useRef)(),_=Object(u.useRef)(),G=Object(u.useRef)(),N=Object(u.useRef)(),B=Object(u.useRef)(),Z=Object(u.useRef)(),K=new z.Vector3(n-i/2,j/2,o-d/2),q=new z.Vector3(n-i/2,j/2,o+d/2),J=new z.Vector3(n+i/2,j/2,o-d/2),Q=new z.Vector3(n+i/2,j/2,o+d/2),ee=function(e,n){e.intersections.length>0&&(e.intersections[0].object===e.eventObject&&S((function(o){var r,i=Object(m.a)(o.elements);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.selected=c.id===t}}catch(s){i.e(s)}finally{i.f()}switch(n){case a.Move:o.moveHandleType=e.eventObject.name,o.resizeHandleType=null;break;case a.Resize:o.resizeHandleType=e.eventObject.name,o.moveHandleType=null;break;default:o.moveHandleType=null,o.resizeHandleType=null}})))},te=function(e,t){e.intersections.length>0&&(e.intersections[0].object===e.eventObject&&(H(t),t===c.Upper||t===c.Lower||t===c.Left||t===c.Right?M.style.cursor="move":M.style.cursor="pointer"))},ie=function(){H(null),M.style.cursor="default"},ae=.05;return Object(I.jsxs)("group",{name:"Foundation Group",children:[Object(I.jsx)($.a,{castShadow:!0,receiveShadow:!0,ref:A,name:"Foundation",position:[n,j/2,o],args:[i,j,d],onContextMenu:function(e){ee(e,a.Select)},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===A.current&&T(!0))},onPointerOut:function(e){T(!1)},onPointerDown:function(e){ee(e,a.Select)},onPointerUp:function(e){},onPointerMove:function(e){},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:b})}),!L&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(X.a,{points:[[K.x,j,K.z],[J.x,j,J.z]],name:"Line LL-LR Upper Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[J.x,j,J.z],[Q.x,j,Q.z]],name:"Line LR-UR Upper Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[Q.x,j,Q.z],[q.x,j,q.z]],name:"Line UR-UL Upper Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[q.x,j,q.z],[K.x,j,K.z]],name:"Line UL-LL Upper Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[K.x,0,K.z],[J.x,0,J.z]],name:"Line LL-LR Lower Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[J.x,0,J.z],[Q.x,0,Q.z]],name:"Line LR-UR Lower Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[Q.x,0,Q.z],[q.x,0,q.z]],name:"Line UR-UL Lower Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[q.x,0,q.z],[K.x,0,K.z]],name:"Line UL-LL Lower Face",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[K.x,0,K.z],[K.x,j,K.z]],name:"Line LL-LL Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[J.x,0,J.z],[J.x,j,J.z]],name:"Line LR-LR Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[q.x,0,q.z],[q.x,j,q.z]],name:"Line UL-UL Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[[Q.x,0,Q.z],[Q.x,j,Q.z]],name:"Line UR-UR Vertical",lineWidth:v,color:g})]}),L&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)($.a,{ref:F,position:K,args:[re,1.2*j,re],name:s.LowerLeft,onPointerDown:function(e){ee(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n+i/2,o+d/2)}))},onPointerOver:function(e){te(e,s.LowerLeft)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerLeft?"red":"white"})}),Object(I.jsx)($.a,{ref:W,position:q,args:[re,1.2*j,re],name:s.UpperLeft,onPointerDown:function(e){ee(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n+i/2,o-d/2)}))},onPointerOver:function(e){te(e,s.UpperLeft)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperLeft?"red":"white"})}),Object(I.jsx)($.a,{ref:Y,position:J,args:[re,1.2*j,re],name:s.LowerRight,onPointerDown:function(e){ee(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n-i/2,o+d/2)}))},onPointerOver:function(e){te(e,s.LowerRight)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerRight?"red":"white"})}),Object(I.jsx)($.a,{ref:_,position:Q,args:[re,1.2*j,re],name:s.UpperRight,onPointerDown:function(e){ee(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n-i/2,o-d/2)}))},onPointerOver:function(e){te(e,s.UpperRight)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperRight?"red":"white"})}),Object(I.jsx)($.c,{ref:G,args:[oe,6,6],position:[n,ae,o-d/2-ne],name:c.Lower,onPointerDown:function(e){ee(e,a.Move)},onPointerOver:function(e){te(e,c.Lower)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Lower?"red":"orange"})}),Object(I.jsx)($.c,{ref:N,args:[oe,6,6],position:[n,ae,o+d/2+ne],name:c.Upper,onPointerDown:function(e){ee(e,a.Move)},onPointerOver:function(e){te(e,c.Upper)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Upper?"red":"orange"})}),Object(I.jsx)($.c,{ref:B,args:[oe,6,6],position:[n-i/2-ne,ae,o],name:c.Left,onPointerDown:function(e){ee(e,a.Move)},onPointerOver:function(e){te(e,c.Left)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Left?"red":"orange"})}),Object(I.jsx)($.c,{ref:Z,args:[oe,6,6],position:[n+i/2+ne,ae,o],name:c.Right,onPointerDown:function(e){ee(e,a.Move)},onPointerOver:function(e){te(e,c.Right)},onPointerOut:function(e){ie()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Right?"red":"orange"})})]}),P&&!L&&Object(I.jsx)("textSprite",{name:"Label",text:"Foundation",fontSize:90,fontFace:"Times Roman",textHeight:1,position:[n,j+.2,o],scale:[1,.2,.2]})]})},ae=function(e){var t=e.id,n=e.cx,o=e.cy,r=e.cz,i=e.lx,a=void 0===i?1:i,c=e.ly,s=void 0===c?1:c,l=e.lz,d=void 0===l?.1:l,h=e.color,j=void 0===h?"white":h,f=e.lineColor,b=void 0===f?"black":f,p=e.lineWidth,g=void 0===p?.1:p,y=e.selected,v=void 0!==y&&y,w=e.showLabel,L=void 0!==w&&w;e.light,e.heatFlux;o=-o;var S=E((function(e){return e.set})),M=E((function(e){return e.getElementById})),R=Object(O.e)().gl.domElement,D=Object(u.useState)(!1),P=Object(x.a)(D,2),k=P[0],T=P[1],C=Object(u.useRef)(),U=Object(u.useRef)(),V=new z.Vector3(n,r,o),H=new z.Vector3(n-a/2,0,o-s/2),A=new z.Vector3(n-a/2,0,o+s/2),F=new z.Vector3(n+a/2,0,o-s/2),W=new z.Vector3(n+a/2,0,o+s/2),Y=M(t),_=function(e){e.intersections.length>0&&(e.intersections[0].object===e.eventObject&&S((function(e){var n,o=Object(m.a)(e.elements);try{for(o.s();!(n=o.n()).done;){var r=n.value;r.selected=r.id===t}}catch(i){o.e(i)}finally{o.f()}})))};return Object(I.jsxs)("group",{name:"Sensor Group",children:[Object(I.jsx)($.a,{receiveShadow:!0,ref:C,args:[a,d,s],position:[n,d/2,o],name:"Sensor",onPointerDown:function(e){_(e)},onContextMenu:function(e){_(e)},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===C.current&&(T(!0),R.style.cursor="move"))},onPointerOut:function(e){T(!1),R.style.cursor="default"},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:(null===Y||void 0===Y?void 0:Y.lit)?"red":j})}),!v&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(X.a,{points:[[H.x,d,H.z],[F.x,d,F.z]],name:"Line LL-LR Upper Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[[F.x,d,F.z],[W.x,d,W.z]],name:"Line LR-UR Upper Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[[W.x,d,W.z],[A.x,d,A.z]],name:"Line UR-UL Upper Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[[A.x,d,A.z],[H.x,d,H.z]],name:"Line UL-LL Upper Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[H,F],name:"Line LL-LR Lower Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[F,W],name:"Line LR-UR Lower Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[W,A],name:"Line UR-UL Lower Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[A,H],name:"Line UL-LL Lower Face",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[H,[H.x,d,H.z]],name:"Line LL-LL Vertical",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[F,[F.x,d,F.z]],name:"Line LR-LR Vertical",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[A,[A.x,d,A.z]],name:"Line UL-UL Vertical",lineWidth:g,color:b}),Object(I.jsx)(X.a,{points:[W,[W.x,d,W.z]],name:"Line UR-UR Vertical",lineWidth:g,color:b})]}),v&&Object(I.jsx)($.c,{ref:U,position:V,args:[oe,6,6],name:"Handle",onPointerDown:function(e){_(e)},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:"orange"})}),(k||L)&&!v&&Object(I.jsx)("textSprite",{name:"Label",text:"Sensor",fontSize:90,fontFace:"Times Roman",textHeight:1,scale:[.5,.2,.2],position:[n,d+.2,o]})]})},ce=function(e){var t=e.id,n=e.cx,o=e.cy,r=e.lx,i=void 0===r?1:r,l=e.ly,d=void 0===l?1:l,h=e.lz,j=void 0===h?1:h,f=e.color,b=void 0===f?"silver":f,p=e.lineColor,g=void 0===p?"black":p,y=e.lineWidth,v=void 0===y?.1:y,w=e.selected,L=void 0!==w&&w;o=-o;var S=E((function(e){return e.set})),M=Object(O.e)().gl.domElement,R=Object(u.useState)(!1),D=Object(x.a)(R,2),P=D[0],T=D[1],C=Object(u.useState)(null),U=Object(x.a)(C,2),V=U[0],H=U[1],A=Object(u.useRef)(),F=Object(u.useRef)(),W=Object(u.useRef)(),Y=Object(u.useRef)(),_=Object(u.useRef)(),G=Object(u.useRef)(),N=Object(u.useRef)(),B=Object(u.useRef)(),Z=Object(u.useRef)(),K=new z.Vector3(n-i/2,j,o-d/2),q=new z.Vector3(n-i/2,j,o+d/2),J=new z.Vector3(n+i/2,j,o-d/2),Q=new z.Vector3(n+i/2,j,o+d/2),ee=.05,te=new z.Vector3(n-i/2,ee,o-d/2),ie=new z.Vector3(n-i/2,ee,o+d/2),ae=new z.Vector3(n+i/2,ee,o-d/2),ce=new z.Vector3(n+i/2,ee,o+d/2),se=Object(u.useRef)(),le=Object(u.useRef)(),ue=Object(u.useRef)(),de=Object(u.useRef)(),he=Object(u.useRef)(),je=new z.Vector3(n,ee,o-d/2-ne),fe=new z.Vector3(n,ee,o+d/2+ne),be=new z.Vector3(n-i/2-ne,ee,o),pe=new z.Vector3(n+i/2+ne,ee,o),xe=new z.Vector3(n,j+ne,o),Oe=function(e,n){e.intersections.length>0&&(e.intersections[0].object===e.eventObject&&S((function(o){var r,i=Object(m.a)(o.elements);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.selected=c.id===t}}catch(s){i.e(s)}finally{i.f()}switch(n){case a.Move:o.moveHandleType=e.eventObject.name,o.resizeHandleType=null;break;case a.Resize:o.resizeHandleType=e.eventObject.name,o.moveHandleType=null;break;default:o.moveHandleType=null,o.resizeHandleType=null}})))},ge=function(e,t){e.intersections.length>0&&(e.intersections[0].object===e.eventObject&&(H(t),t===c.Top||t===c.Upper||t===c.Lower||t===c.Left||t===c.Right?M.style.cursor="move":M.style.cursor="pointer"))},me=function(){H(null),M.style.cursor="default"};return Object(I.jsxs)("group",{name:"Cuboid Group",children:[Object(I.jsx)($.a,{castShadow:!0,receiveShadow:!0,ref:A,args:[i,j,d],position:[n,j/2,o],name:"Cuboid",onPointerDown:function(e){Oe(e,a.Select)},onContextMenu:function(e){Oe(e,a.Select)},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===A.current&&T(!0))},onPointerOut:function(e){T(!1)},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:b})}),!L&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(X.a,{points:[K,J],name:"Line LL-LR Top",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[J,Q],name:"Line LR-UR Top",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[Q,q],name:"Line UR-UL Top",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[q,K],name:"Line UL-LL Top",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[te,ae],name:"Line LL-LR Bottom",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[ae,ce],name:"Line LR-UR Bottom",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[ce,ie],name:"Line UR-UL Bottom",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[ie,te],name:"Line UL-LL Bottom",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[K,te],name:"Line LL-LL Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[J,ae],name:"Line LR-LR Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[q,ie],name:"Line UL-UL Vertical",lineWidth:v,color:g}),Object(I.jsx)(X.a,{points:[Q,ce],name:"Line UR-UR Vertical",lineWidth:v,color:g})]}),L&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)($.a,{ref:F,name:s.LowerLeftTop,args:[re,re,re],position:K,onPointerDown:function(e){Oe(e,a.Resize)},onPointerOver:function(e){ge(e,s.LowerLeftTop)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerLeftTop?"red":"white"})}),Object(I.jsx)($.a,{ref:W,name:s.UpperLeftTop,args:[re,re,re],position:q,onPointerDown:function(e){Oe(e,a.Resize)},onPointerOver:function(e){ge(e,s.UpperLeftTop)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperLeftTop?"red":"white"})}),Object(I.jsx)($.a,{ref:Y,name:s.LowerRightTop,args:[re,re,re],position:J,onPointerDown:function(e){Oe(e,a.Resize)},onPointerOver:function(e){ge(e,s.LowerRightTop)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerRightTop?"red":"white"})}),Object(I.jsx)($.a,{ref:_,name:s.UpperRightTop,args:[re,re,re],position:Q,onPointerDown:function(e){Oe(e,a.Resize)},onPointerOver:function(e){ge(e,s.UpperRightTop)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperRightTop?"red":"white"})}),Object(I.jsx)($.a,{ref:G,name:s.LowerLeft,args:[re,re,re],position:te,onPointerDown:function(e){Oe(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n+i/2,o+d/2)}))},onPointerOver:function(e){ge(e,s.LowerLeft)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerLeft?"red":"white"})}),Object(I.jsx)($.a,{ref:N,name:s.UpperLeft,args:[re,re,re],position:ie,onPointerDown:function(e){Oe(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n+i/2,o-d/2)}))},onPointerOver:function(e){ge(e,s.UpperLeft)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperLeft?"red":"white"})}),Object(I.jsx)($.a,{ref:B,name:s.LowerRight,args:[re,re,re],position:ae,onPointerDown:function(e){Oe(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n-i/2,o+d/2)}))},onPointerOver:function(e){ge(e,s.LowerRight)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.LowerRight?"red":"white"})}),Object(I.jsx)($.a,{ref:Z,name:s.UpperRight,args:[re,re,re],position:ce,onPointerDown:function(e){Oe(e,a.Resize),S((function(e){k.setVector2(e.resizeAnchor,n-i/2,o-d/2)}))},onPointerOver:function(e){ge(e,s.UpperRight)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===s.UpperRight?"red":"white"})}),Object(I.jsx)($.c,{ref:se,args:[oe,6,6],name:c.Lower,position:je,onPointerDown:function(e){Oe(e,a.Move)},onPointerOver:function(e){ge(e,c.Lower)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Lower?"red":"orange"})}),Object(I.jsx)($.c,{ref:le,args:[oe,6,6],name:c.Upper,position:fe,onPointerDown:function(e){Oe(e,a.Move)},onPointerOver:function(e){ge(e,c.Upper)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Upper?"red":"orange"})}),Object(I.jsx)($.c,{ref:ue,args:[oe,6,6],name:c.Left,position:be,onPointerDown:function(e){Oe(e,a.Move)},onPointerOver:function(e){ge(e,c.Left)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Left?"red":"orange"})}),Object(I.jsx)($.c,{ref:de,args:[oe,6,6],name:c.Right,position:pe,onPointerDown:function(e){Oe(e,a.Move)},onPointerOver:function(e){ge(e,c.Right)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Right?"red":"orange"})}),Object(I.jsx)($.c,{ref:he,args:[oe,6,6],name:c.Top,position:xe,onPointerDown:function(e){Oe(e,a.Move)},onPointerOver:function(e){ge(e,c.Top)},onPointerOut:function(e){me()},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:V===c.Top?"red":"orange"})})]}),P&&!L&&Object(I.jsx)("textSprite",{name:"Label",text:"Box",fontSize:90,fontFace:"Times Roman",textHeight:1,scale:[.4,.2,.2],position:[n,j+.2,o]})]})},se=function(){var e=E((function(e){return e.elements}));return Object(I.jsxs)("group",{name:"Content",children:[e.filter((function(e){return e.type===i.Foundation})).map((function(e){return Object(I.jsx)(ie,Object(g.a)({},e),e.id)})),e.filter((function(e){return e.type===i.Sensor})).map((function(e){return Object(I.jsx)(ae,Object(g.a)({},e),e.id)})),e.filter((function(e){return e.type===i.Cuboid})).map((function(e){return Object(I.jsx)(ce,Object(g.a)({},e),e.id)}))]})},le=function(){var e=E((function(e){return e.set})),t=E((function(e){return e.getSelectedElement})),n=E((function(e){return e.selectNone})),o=E((function(e){return e.moveHandleType})),r=E((function(e){return e.resizeHandleType})),a=E((function(e){return e.resizeAnchor})),d=E((function(e){return e.groundColor})),h=E((function(e){return e.setElementPosition})),j=E((function(e){return e.setElementSize})),f=E((function(e){return e.updateElementById})),b=Object(u.useState)(null),p=Object(x.a)(b,2),g=p[0],m=p[1],y=Object(O.e)(),v=y.camera,w=y.gl.domElement,L=Object(u.useRef)(),S=Object(u.useRef)(),M=Object(u.useRef)(),R=Object(u.useMemo)((function(){return new z.Raycaster}),[]),D=l.Ground,P=Object(u.useMemo)((function(){return new z.Vector3}),[]),T=Object(u.useMemo)((function(){return new z.Euler}),[]);return g&&(o===c.Top?(D=l.Horizontal,k.setVector(P,g.cx,g.lz,-g.cy),k.setEuler(T,-Math.PI/2,0,0)):r===s.LowerLeftTop?(D=l.Vertical,k.setVector(P,g.cx-g.lx/2,0,-g.cy-g.ly/2),k.setEuler(T,0,0,0)):r===s.UpperLeftTop?(D=l.Vertical,k.setVector(P,g.cx-g.lx/2,0,-g.cy+g.ly/2),k.setEuler(T,0,0,0)):r===s.LowerRightTop?(D=l.Vertical,k.setVector(P,g.cx+g.lx/2,0,-g.cy-g.ly/2),k.setEuler(T,0,0,0)):r===s.UpperRightTop&&(D=l.Vertical,k.setVector(P,g.cx+g.lx/2,0,-g.cy+g.ly/2),k.setEuler(T,0,0,0))),Object(I.jsxs)(I.Fragment,{children:[g&&D===l.Horizontal&&Object(I.jsx)($.b,{ref:S,visible:!1,rotation:T,position:P,args:[1e3,1e3],children:Object(I.jsx)("meshStandardMaterial",{attach:"material",side:z.DoubleSide,opacity:.1,color:"white"})}),g&&D===l.Vertical&&Object(I.jsx)($.b,{ref:M,visible:!1,rotation:T,position:P,args:[1e3,1e3],children:Object(I.jsx)("meshStandardMaterial",{attach:"material",side:z.DoubleSide,opacity:.1,color:"white"})}),Object(I.jsx)($.b,{receiveShadow:!0,ref:L,name:"Ground",rotation:[-Math.PI/2,0,0],position:[0,-.01,0],args:[1e4,1e4],onContextMenu:function(t){t.intersections.length>0&&(t.intersections[0].object===L.current&&(n(),e((function(e){e.clickObjectType=i.Ground}))))},onPointerDown:function(o){o.intersections.length>0&&(o.intersections[0].object===L.current?(e((function(e){e.clickObjectType=i.Ground})),n()):(m(t()),e((function(e){e.enableOrbitController=!1}))))},onPointerUp:function(t){m(null),e((function(e){e.enableOrbitController=!0}))},onPointerMove:function(e){if(g&&L&&L.current&&g.type){var t,n=new z.Vector2;switch(n.x=e.offsetX/w.clientWidth*2-1,n.y=-e.offsetY/w.clientHeight*2+1,R.setFromCamera(n,v),g.type){case i.Sensor:if((t=R.intersectObjects([L.current])).length>0){var l=t[0].point;h(g.id,l.x,-l.z)}break;case i.Foundation:if((t=R.intersectObjects([L.current])).length>0){var u=t[0].point;if(o)switch(o){case c.Lower:h(g.id,u.x,-u.z-g.ly/2-ne);break;case c.Upper:h(g.id,u.x,-u.z+g.ly/2+ne);break;case c.Left:h(g.id,u.x+g.lx/2+ne,-u.z);break;case c.Right:h(g.id,u.x-g.lx/2-ne,-u.z)}if(r){var d=Math.max(Math.abs(a.x-u.x),.5),b=Math.max(Math.abs(a.y-u.z),.5);switch(j(g.id,d,b),r){case s.LowerLeft:h(g.id,u.x+d/2,-u.z-b/2);break;case s.UpperLeft:h(g.id,u.x+d/2,-u.z+b/2);break;case s.LowerRight:h(g.id,u.x-d/2,-u.z-b/2);break;case s.UpperRight:h(g.id,u.x-d/2,-u.z+b/2)}}}break;case i.Cuboid:if(o===c.Top&&S.current){if((t=R.intersectObjects([S.current])).length>0){var p=t[0].point;h(g.id,p.x,-p.z)}}else if(!M.current||r!==s.LowerLeftTop&&r!==s.UpperLeftTop&&r!==s.LowerRightTop&&r!==s.UpperRightTop){if((t=R.intersectObjects([L.current])).length>0){var x=t[0].point;if(o)switch(o){case c.Lower:h(g.id,x.x,-x.z-g.ly/2-ne);break;case c.Upper:h(g.id,x.x,-x.z+g.ly/2+ne);break;case c.Left:h(g.id,x.x+g.lx/2+ne,-x.z);break;case c.Right:h(g.id,x.x-g.lx/2-ne,-x.z)}if(r){var O=Math.max(Math.abs(a.x-x.x),.5),m=Math.max(Math.abs(a.y-x.z),.5);switch(j(g.id,O,m),r){case s.LowerLeft:h(g.id,x.x+O/2,-x.z-m/2);break;case s.UpperLeft:h(g.id,x.x+O/2,-x.z+m/2);break;case s.LowerRight:h(g.id,x.x-O/2,-x.z-m/2);break;case s.UpperRight:h(g.id,x.x-O/2,-x.z+m/2)}}}}else if((t=R.intersectObjects([M.current])).length>0){var y=t[0].point;f(g.id,{lz:Math.max(1,y.y)})}}}},children:Object(I.jsx)("meshStandardMaterial",{attach:"material",color:d})})]})},ue=[.103,.104,.109,.12,.13,.137,.138,.134,.121,.111,.106,.103];!function(e){e[e.NONE=0]="NONE",e[e.KASTEN_YOUNG=1]="KASTEN_YOUNG",e[e.SPHERE_MODEL=2]="SPHERE_MODEL"}(V||(V={}));Math.PI,Math.PI;var de,he,je,fe,be,pe,xe,Oe=23.45/180*Math.PI,ge=function(e){var t=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5);return Oe*Math.sin(k.TWO_PI*(284+t)/365.25)},me=function(e){return(60*e.getHours()+e.getMinutes()-720)/720*Math.PI},ye=function(e,t){return ve(1,me(e),ge(e),k.toRadians(t)).normalize()},ve=function(e,t,n,o){var r=Math.cos(n),i=Math.sin(n),a=Math.cos(o),c=Math.sin(o),s=Math.cos(t),l=Math.sin(t),u=Math.asin(i*c+r*s*a),d=l*r,h=a*i-s*r*c,j=Math.atan2(h,d),f=new z.Vector3(e,j,u);return k.sphericalToCartesianZ(f),f.x=-f.x,f},we=function(e,t,n,o){return function(e){var t=k.TWO_PI*e/365;return 1.361*(1.00011+.034221*Math.cos(t)+.00128*Math.sin(t)+719e-6*Math.cos(2*t)+77e-6*Math.sin(2*t))}(t)*Math.pow(.7,Math.pow(function(e,t,n){var o;switch(e){case V.NONE:return 1;case V.KASTEN_YOUNG:return o=t.angleTo(k.UNIT_VECTOR_POS_Z),1/(Math.cos(o)+.50572*Math.pow(96.07995-o/Math.PI*180,-1.6364));default:o=t.angleTo(k.UNIT_VECTOR_POS_Z);var r=Math.cos(o),i=708,a=n/9e3;return Math.sqrt((i+a)*(i+a)*r*r+(1417+a)*(1-a))-(i+a)*r}}(o,e,n),.678))},Le=function(e,t,n,o){var r=0,i=n.dot(k.UNIT_VECTOR_POS_Z),a=.5*(1+i);a>0&&(r+=ue[t]*a*o);var c=.5*Math.abs(1-i);return k.isZero(c)||(r+=e.albedo*c*o),r},Se=function(e){var t=e.hourAngle,n=e.declinationAngle,o=e.radius,r=void 0===o?10:o,i=e.date,a=void 0===i?new Date:i,c=e.latitude,s=void 0===c?42/180*Math.PI:c;Object(u.useEffect)((function(){return function(){}}),[a,s]);var l=Object(u.useMemo)((function(){for(var e=[],t=[],n=2*Math.PI/72,o=0,i=0;i<k.TWO_PI+n/2;i+=n){var a=Math.min(i,k.TWO_PI),c=.05*r;e.push(k.sphericalToCartesianZ(new z.Vector3(r,a,0))),e.push(k.sphericalToCartesianZ(new z.Vector3(r+c,a,0))),e.push(k.sphericalToCartesianZ(new z.Vector3(r,a+n,0))),e.push(k.sphericalToCartesianZ(new z.Vector3(r+c,a,0))),e.push(k.sphericalToCartesianZ(new z.Vector3(r+c,a+n,0))),e.push(k.sphericalToCartesianZ(new z.Vector3(r,a+n,0)));var s=void 0;k.TWO_PI-a>k.ZERO_TOLERANCE&&(c=.05*r+(o%3===0?.2:0),(s=new z.Vector3(r,a,0)).z=.002,t.push(k.sphericalToCartesianZ(s)),(s=new z.Vector3(r+c,a,0)).z=.002,t.push(k.sphericalToCartesianZ(s))),o++}for(var l=3*e.length,u=new Float32Array(l),d=new Float32Array(l),h=new Float32Array(l),j=0;j<e.length;j++){var f=3*j;u[f]=e[j].x,u[f+1]=e[j].y,u[f+2]=e[j].z,d[f]=0,d[f+1]=1,d[f+2]=0;var b=Math.floor(j/18)%2===0?.2:1;h[f]=b,h[f+1]=b,h[f+2]=b}return[u,d,h,t]}),[r]),d=Object(x.a)(l,4),h=d[0],j=d[1],f=d[2],b=d[3],p=Object(u.useMemo)((function(){for(var e=k.TWO_PI/96,t=[],o=-Math.PI;o<Math.PI+e/2;o+=e){var i=ve(r,o,n,s);i.z>-.1&&t.push(i)}return t}),[s,r,n]),O=function(e){for(var t=k.TWO_PI/96,n=[],o=-Math.PI;o<Math.PI+t/2;o+=t){var i=ve(r,o,e,s);i.z>-.1&&n.push(i)}return n},g=Object(u.useMemo)((function(){for(var e=ge(new Date(2021,11,22)),t=(ge(new Date(2021,5,22))-e)/5,n=[],o=0;o<=5;o++)n.push(O(e+o*t));return n}),[s,r]),m=Object(u.useMemo)((function(){return ve(r,t,n,s)}),[s,n,t,r]),y=Object(u.useMemo)((function(){for(var e=2*Oe/12,t=k.TWO_PI/96,n=new z.BufferGeometry,o=0,i=[],a=[],c=-Oe;c<Oe-e/2;c+=e)for(var l=-Math.PI;l<Math.PI-t/2;l+=t){var u=l+t,d=c+e;u>Math.PI&&(u=Math.PI),d>Oe&&(d=Oe);var h=ve(r,l,c,s),j=ve(r,u,c,s),f=ve(r,u,d,s),b=ve(r,l,d,s);(h.z>=0||j.z>=0||f.z>=0||b.z>=0)&&(i.push(h,j,f,b),a.push(o),a.push(o+1),a.push(o+2),a.push(o),a.push(o+2),a.push(o+3),o+=4)}return n.setFromPoints(i),n.setIndex(new z.BufferAttribute(new Uint16Array(a),1)),n}),[s,r]);return Object(I.jsxs)("mesh",{rotation:new z.Euler(-Math.PI/2,0,0),name:"Heliodon",children:[Object(I.jsxs)("mesh",{children:[Object(I.jsxs)("bufferGeometry",{attach:"geometry",children:[Object(I.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:h.length/3,array:h,itemSize:3}),Object(I.jsx)("bufferAttribute",{attachObject:["attributes","normal"],count:j.length/3,array:j,itemSize:3}),Object(I.jsx)("bufferAttribute",{attachObject:["attributes","color"],count:f.length/3,array:f,itemSize:3})]}),Object(I.jsx)("meshBasicMaterial",{side:z.DoubleSide,vertexColors:!0,polygonOffset:!0,polygonOffsetFactor:-.7,polygonOffsetUnits:-2})]}),Object(I.jsx)("lineSegments",{args:[(new z.BufferGeometry).setFromPoints(b),new z.MeshBasicMaterial({color:0})]}),Object(I.jsxs)("mesh",{children:[p.length>3&&Object(I.jsx)(X.a,{lineWidth:2,points:p,color:"yellow"}),g.filter((function(e){return e.length>3})).map((function(e,t){return Object(I.jsx)(X.a,{opacity:0===t||5===t?1:.5,lineWidth:0===t||5===t?1:.5,points:e,color:"#999"},t)})),Object(I.jsx)("mesh",{args:[y,new z.MeshBasicMaterial({side:z.DoubleSide,color:new z.Color(1,1,0),transparent:!0,opacity:.5,clippingPlanes:[new z.Plane(k.UNIT_VECTOR_POS_Y,0)]})]}),Object(I.jsx)("mesh",{position:m,args:[new z.SphereGeometry(.25,20,20),new z.MeshBasicMaterial({color:4294967040})]})]})]})},Me=n.p+"static/media/aladdin-logo.96b59d24.png",Re=n.p+"static/media/ifi-logo.eb360016.png",De=n(42),Pe=n(43),ze=n(521),ke=n(527),Te=n(526);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ue(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ve(e,t){var n=e.title,o=e.titleId,r=Ue(e,["title","titleId"]);return u.createElement("svg",Ce({t:1613755944969,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":5967,xmlnsXlink:"http://www.w3.org/1999/xlink",width:200,height:200,ref:t,"aria-labelledby":o},r),n?u.createElement("title",{id:o},n):null,de||(de=u.createElement("defs",null,u.createElement("style",{type:"text/css"}))),he||(he=u.createElement("path",{d:"M194.187431 235.50871m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5968})),je||(je=u.createElement("path",{d:"M347.505182 165.510915h552.305182v139.99559H347.505182z","p-id":5969})),fe||(fe=u.createElement("path",{d:"M194.187431 512.1129m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5970})),be||(be=u.createElement("path",{d:"M347.505182 442.115105h552.305182v139.99559H347.505182z","p-id":5971})),pe||(pe=u.createElement("path",{d:"M194.187431 788.49129m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5972})),xe||(xe=u.createElement("path",{d:"M347.505182 718.719294h552.305182v139.99559H347.505182z","p-id":5973})))}var Ee,Ie,He,Ae,Fe,We,Ye,_e,Ge,Ne,Be=u.forwardRef(Ve),Xe=(n.p,n(139),ze.a.SubMenu),Ze=Object(Pe.a)(Be)(Ee||(Ee=Object(De.a)(["\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  height: 40px;\n  width: 40px;\n  transition: 0.5s;\n  fill: brown;\n\n  &:hover {\n    fill: white;\n  }\n"]))),Ke=function(e){var t=e.collectDailyLightSensorData,n=e.collectYearlyLightSensorData,o=e.openAboutUs,r=(Object(A.a)(e,["collectDailyLightSensorData","collectYearlyLightSensorData","openAboutUs"]),E((function(e){return e.set}))),i=E((function(e){return e.showGroundPanel})),a=E((function(e){return e.showWeatherPanel})),c=(E((function(e){return e.showHeliodonPanel})),Object(I.jsxs)(ze.a,{children:[Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:i,onChange:function(e){r((function(t){t.showGroundPanel=e.target.checked}))},children:"Ground Settings"})},"ground-panel-check-box"),Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:a,onChange:function(e){r((function(t){t.showWeatherPanel=e.target.checked}))},children:"Weather Data"})},"weather-panel-check-box"),Object(I.jsxs)(Xe,{title:"Sensors",children:[Object(I.jsx)(ze.a.Item,{onClick:t,children:"Collect Daily Data"},"sensor-collect-daily-data"),Object(I.jsx)(ze.a.Item,{onClick:n,children:"Collect Yearly Data"},"sensor-collect-yearly-data")]},"sensors"),Object(I.jsx)(ze.a.Item,{onClick:function(){o(!0)},children:"About Us"},"about-us")]}));return Object(I.jsx)(Te.a,{overlay:c,trigger:["click"],children:Object(I.jsx)(Ze,{})})},qe=n(525),Je=n(528),Qe=n(322),$e=n(136),et={border:"1px solid",width:"400px",height:"400px"},tt=function(e){var t=e.setLatitude,n=e.setLongitude,o=e.setZoom,r=e.setTilt,i=e.setType,a=E((function(e){return e.latitude})),c=E((function(e){return e.longitude})),s=E((function(e){return e.mapZoom})),l=E((function(e){return e.mapType})),d=E((function(e){return e.mapTilt})),h=Object(u.useState)(null),j=Object(x.a)(h,2),f=j[0],b=j[1],p=Object(u.useRef)(),O=Object(u.useRef)([]),g=E((function(e){return e.weatherData})),m=E((function(e){return e.mapWeatherStations})),y=Object(u.useState)(!1),v=Object(x.a)(y,2),w=v[0],L=v[1];Object(u.useEffect)((function(){}),[w]);var S=Object(u.useCallback)((function(e){b(e)}),[]),M=Object(u.useCallback)((function(e){b(null)}),[]),R={lat:a,lng:c};return Object(I.jsx)($e.a,{mapContainerStyle:et,mapTypeId:l,center:R,zoom:s,tilt:d,onLoad:S,onBoundsChanged:function(){f&&(p.current=f.getBounds(),m&&function(){if(p.current){for(var e in O.current.length=0,g)if(g.hasOwnProperty(e)){var t=g[e],n=new google.maps.LatLng(t.latitude,t.longitude);p.current.contains(n)&&O.current.push(n)}L(!w)}}())},onUnmount:M,onCenterChanged:function(){if(f){var e=f.getCenter(),o=e.lat();o!==a&&(null===t||void 0===t||t(o));var r=e.lng();r!==c&&(null===n||void 0===n||n(r))}},onZoomChanged:function(){if(f){var e=f.getZoom();e!==s&&(null===o||void 0===o||o(e))}},onTiltChanged:function(){if(f){var e=f.getTilt();e!==d&&(null===r||void 0===r||r(e))}},onMapTypeIdChanged:function(){if(f){var e=f.getMapTypeId();e!==l&&(null===i||void 0===i||i(e))}},children:Object(I.jsx)(I.Fragment,{children:m&&O.current.map((function(e,t){var n=.2*s;return Object(I.jsx)($e.b,{icon:{path:google.maps.SymbolPath.CIRCLE,strokeColor:"red",strokeWeight:n+2,scale:n},position:e},t)}))})})},nt=Object(u.memo)(tt),ot=n(510),rt=Object(Pe.a)(ot.a)(Ie||(Ie=Object(De.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 999;\n"]))),it=n(79),at=n.n(it),ct=["places"],st=Pe.a.div(He||(He=Object(De.a)(["\n  position: fixed;\n  top: 10px;\n  left: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),lt=Pe.a.div(Ae||(Ae=Object(De.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 420px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),ut=Pe.a.div(Fe||(Fe=Object(De.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),dt=function(e){var t=e.grid,n=e.groundImage,o=e.groundColor,r=e.setGrid,i=e.setGroundImage,a=e.setGroundColor,c=e.changeLatitude,s=e.changeLongitude,l=e.changeMapZoom,d=e.changeMapTilt,h=e.changeMapType,j=E((function(e){return e.set})),f=E((function(e){return e.latitude})),b=E((function(e){return e.longitude})),p=E((function(e){return e.mapZoom})),O=E((function(e){return e.mapWeatherStations})),g=E((function(e){return e.address})),m=Object(u.useRef)(),y=Object(u.useState)({x:0,y:0}),v=Object(x.a)(y,2),w=v[0],L=v[1],S=Object($e.d)({id:"google-map-script",googleMapsApiKey:"AIzaSyCX6AmhM9d6R1ne9E7redd86YEahX_2Scs",libraries:ct}),M=S.isLoaded,R=S.loadError;return Object(I.jsx)(at.a,{handle:".handle",bounds:"parent",axis:"both",position:w,onDrag:function(e,t){L({x:t.x,y:t.y})},onStart:function(e,t){},onStop:function(e,t){},children:Object(I.jsx)(st,{children:Object(I.jsxs)(lt,{children:[Object(I.jsxs)(ut,{className:"handle",children:[Object(I.jsx)("span",{children:"Ground Settings"}),Object(I.jsx)("span",{style:{cursor:"pointer"},onClick:function(){j((function(e){e.showGroundPanel=!1}))},children:"Close"})]}),Object(I.jsxs)(qe.b,{direction:"vertical",children:[Object(I.jsxs)(qe.b,{style:{padding:"20px"},align:"center",size:20,children:[Object(I.jsxs)(qe.b,{direction:"vertical",children:[Object(I.jsxs)(qe.b,{children:[Object(I.jsx)(qe.b,{style:{width:"60px"},children:"Grid:"}),Object(I.jsx)(Je.a,{title:"Show ground grid",checked:t,onChange:function(e){null===r||void 0===r||r(e)}})]}),Object(I.jsxs)(qe.b,{children:[Object(I.jsx)(qe.b,{style:{width:"60px"},children:"Image:"}),Object(I.jsx)(Je.a,{title:"Show ground image",checked:n,onChange:function(e){null===i||void 0===i||i(e)}})]}),Object(I.jsxs)(qe.b,{children:[Object(I.jsx)(qe.b,{style:{width:"60px"},children:"Stations:"}),Object(I.jsx)(Je.a,{title:"Show weather stations",checked:O,onChange:function(e){var t;t=e,j((function(e){e.mapWeatherStations=t}))}})]})]}),Object(I.jsxs)("div",{children:["Ground Color",Object(I.jsx)("br",{}),Object(I.jsx)(Qe.a,{color:o,onChangeComplete:function(e){null===a||void 0===a||a(e.hex)}})]})]}),M&&Object(I.jsx)(qe.b,{children:Object(I.jsx)("div",{children:Object(I.jsx)($e.c,{onLoad:function(e){m.current=e},onPlacesChanged:function(){var e,t=null===(e=m.current)||void 0===e?void 0:e.getPlaces();t&&t.length>0&&j((function(e){var n=t[0].geometry;n&&(e.latitude=n.location.lat(),e.longitude=n.location.lng()),e.address=t[0].formatted_address}))},children:Object(I.jsx)("input",{type:"text",placeholder:g,style:{boxSizing:"border-box",border:"1px solid transparent",width:"400px",height:"32px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses",position:"relative"}})})})}),M?Object(I.jsx)(qe.b,{children:Object(I.jsxs)("div",{children:[Object(I.jsx)(nt,{setLatitude:c,setLongitude:s,setZoom:l,setTilt:d,setType:h}),"Coordinates: (",f.toFixed(4),"\xb0, ",b.toFixed(4),"\xb0), Zoom: ",p]})}):Object(I.jsx)(rt,{}),R&&Object(I.jsx)(qe.b,{children:Object(I.jsx)("div",{children:"Map cannot be loaded right now, sorry."})})]})]})})})},ht=n(243),jt=n(511),ft=n(520),bt=n(67),pt=n.n(bt),xt=Pe.a.div(We||(We=Object(De.a)(["\n  position: fixed;\n  top: 80px;\n  left: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),Ot=Pe.a.div(Ye||(Ye=Object(De.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 640px;\n  padding: 0;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),gt=Pe.a.div(_e||(_e=Object(De.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),mt=function(e){var t=e.heliodon,n=e.latitude,o=e.date,r=e.animateSun,i=e.setHeliodon,a=e.setSunAnimation,c=e.changeLatitude,s=e.changeDate,l=e.changeTime,d=E((function(e){return e.set})),h=Object(u.useRef)(0),j=Object(u.useRef)(-1),f=Object(u.useState)({x:0,y:0}),b=Object(x.a)(f,2),p=b[0],O=b[1];Object(u.useEffect)((function(){return h.current=requestAnimationFrame(g),function(){cancelAnimationFrame(h.current)}}),[r]);var g=function e(){if(r){h.current=requestAnimationFrame(e);var t=Date.now();if(t-j.current>100){var n=o.getDate();o.setHours(o.getHours(),o.getMinutes()+15),o.setDate(n),null===l||void 0===l||l(o),j.current=t}}};return Object(I.jsx)(at.a,{handle:".handle",bounds:"parent",axis:"both",position:p,onDrag:function(e,t){O({x:t.x,y:t.y})},onStart:function(e,t){},onStop:function(e,t){},children:Object(I.jsx)(xt,{children:Object(I.jsxs)(Ot,{children:[Object(I.jsxs)(gt,{className:"handle",children:[Object(I.jsx)("span",{children:"Heliodon Settings"}),Object(I.jsx)("span",{style:{cursor:"pointer"},onClick:function(){d((function(e){e.showHeliodonPanel=!1}))},children:"Close"})]}),Object(I.jsxs)(qe.b,{style:{padding:"20px"},align:"baseline",size:20,children:[Object(I.jsxs)("div",{children:["Show",Object(I.jsx)("br",{}),Object(I.jsx)(Je.a,{checked:t,onChange:function(e){null===i||void 0===i||i(e)}})]}),Object(I.jsxs)("div",{children:["Animate",Object(I.jsx)("br",{}),Object(I.jsx)(Je.a,{checked:r,onChange:function(e){null===a||void 0===a||a(e)}})]}),Object(I.jsxs)("div",{children:["Date",Object(I.jsx)("br",{}),Object(I.jsx)(ht.a,{value:pt()(o),onChange:function(e){e&&(null===s||void 0===s||s(e.toDate()))}})]}),Object(I.jsxs)("div",{children:["Time",Object(I.jsx)("br",{}),Object(I.jsx)(jt.a,{value:pt()(o,"HH:mm"),format:"HH:mm",onChange:function(e){e&&(null===l||void 0===l||l(e.toDate()))}})]}),Object(I.jsxs)("div",{children:["Latitude: ",n.toFixed(4),"\xb0",Object(I.jsx)(ft.a,{style:{width:"150px"},marks:{"-90":"-90\xb0",0:"0\xb0",90:"90\xb0"},min:-90,max:90,tooltipVisible:!1,defaultValue:n,onChange:function(e){null===c||void 0===c||c(e)}})]})]})]})})})},yt=(n(324),function(){window.open("https://intofuture.org","_blank")}),vt=n(305),wt=n.n(vt),Lt=function(){return Object(I.jsx)(wt.a,{location:"bottom",buttonText:"Accept",cookieName:"AladdinCookieName",style:{background:"#2B373B",textAlign:"center",zIndex:99999},buttonStyle:{color:"#4e503b",fontSize:"12px"},expires:150,children:"By clicking Accept, you agree to our use of cookies to improve your experience with Aladdin."})},St=n(512),Mt=function(){var e,t=E((function(e){return e.latitude})),n=E((function(e){return e.longitude})),o=E((function(e){return e.mapZoom})),r=Object(St.a)("https://maps.googleapis.com/maps/api/staticmap?maptype=satellite&center="+t+","+n+"&zoom="+o+"&size="+(e=640)+"x"+e+"&scale=2&key=AIzaSyCX6AmhM9d6R1ne9E7redd86YEahX_2Scs");return Object(I.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[Object(I.jsx)("planeBufferGeometry",{args:[100,100]}),Object(I.jsx)("meshStandardMaterial",{attach:"material",side:z.DoubleSide,map:r,opacity:1})]})},Rt=n(523),Dt=Object(Pe.a)(ze.a)(Ge||(Ge=Object(De.a)(["\n  padding: 0;\n  margin: 0;\n"]))),Pt=Dt.SubMenu,zt={display:"block",height:"30px",paddingLeft:"10px",lineHeight:"30px"},kt=function(e){e.city;var t=e.collectDailyLightSensorData,n=e.collectYearlyLightSensorData,o=(Object(A.a)(e,["city","collectDailyLightSensorData","collectYearlyLightSensorData"]),E((function(e){return e.set}))),a=E((function(e){return e.getSelectedElement})),c=E((function(e){return e.updateElementById})),s=E((function(e){return e.axes})),l=E((function(e){return e.grid})),u=E((function(e){return e.theme})),d=E((function(e){return e.showHeliodonPanel})),h=E((function(e){return e.showGroundPanel})),j=E((function(e){return e.showWeatherPanel})),f=E((function(e){return e.clickObjectType})),b=a();switch(b?b.type:f){case i.Sky:return Object(I.jsxs)(Dt,{style:{padding:0,margin:0},children:[Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:s,onChange:function(e){o((function(t){t.axes=e.target.checked}))},children:"Axes"})},"axes"),Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:d,onChange:function(e){o((function(t){t.showHeliodonPanel=e.target.checked}))},children:"Heliodon Settings"})},"heliodon-settings"),Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:j,onChange:function(e){o((function(t){t.showWeatherPanel=e.target.checked}))},children:"Weather Data"})},"weather-data"),Object(I.jsx)(Pt,{title:"Theme",children:Object(I.jsxs)(Rt.a.Group,{value:u,style:{height:"105px"},onChange:function(e){o((function(t){t.theme=e.target.value}))},children:[Object(I.jsx)(Rt.a,{style:zt,value:r.Default,children:"Default"}),Object(I.jsx)(Rt.a,{style:zt,value:r.Desert,children:"Desert"}),Object(I.jsx)(Rt.a,{style:zt,value:r.Grassland,children:"Grassland"})]})},"theme")]});case i.Foundation:return Object(I.jsxs)(Dt,{children:[Object(I.jsx)(ze.a.Item,{children:"Copy"},"foundation-copy"),Object(I.jsx)(ze.a.Item,{children:"Cut"},"foundation-cut")]});case i.Sensor:return Object(I.jsxs)(Dt,{children:[Object(I.jsx)(ze.a.Item,{children:"Copy"},"sensor-copy"),Object(I.jsx)(ze.a.Item,{children:"Cut"},"sensor-cut"),Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:!!(null===b||void 0===b?void 0:b.showLabel),onChange:function(e){b&&c(b.id,{showLabel:e.target.checked})},children:"Show Label"})},"sensor-light"),Object(I.jsxs)(Pt,{title:"Analysis",children:[Object(I.jsx)(ze.a.Item,{onClick:t,children:"Collect Daily Data"},"sensor-collect-daily-data"),Object(I.jsx)(ze.a.Item,{onClick:n,children:"Collect Yearly Data"},"sensor-collect-yearly-data")]},"analysis")]});case i.Cuboid:return Object(I.jsxs)(Dt,{children:[Object(I.jsx)(ze.a.Item,{children:"Copy"},"cuboid-copy"),Object(I.jsx)(ze.a.Item,{children:"Cut"},"cuboid-cut")]});default:return Object(I.jsxs)(Dt,{children:[Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:l,onChange:function(e){o((function(t){t.grid=e.target.checked}))},children:"Grid"})},"ground-grid"),Object(I.jsx)(ze.a.Item,{children:Object(I.jsx)(ke.a,{checked:h,onChange:function(e){o((function(t){t.showGroundPanel=e.target.checked}))},children:"Ground Settings"})},"ground-settings"),Object(I.jsx)(ze.a.Item,{children:"Paste"},"ground-paste")]})}},Tt=n(326),Ct=n(516),Ut=n(517),Vt=n(158),Et=n(518),It=n(315),Ht=n(197),At=n(76),Ft=n(198),Wt=n(151),Yt=function(e){var t=e.type,n=e.dataSource,r=e.height,i=e.labelX,a=e.labelY,c=e.unitX,s=e.unitY,l=e.yMin,d=void 0===l?"auto":l,h=e.yMax,j=void 0===h?"auto":h,f=e.fractionDigits,b=void 0===f?2:f,p=e.referenceX,O=e.color,g=(Object(A.a)(e,["type","dataSource","height","labelX","labelY","unitX","unitY","yMin","yMax","fractionDigits","referenceX","color"]),Object(u.useState)(0)),m=Object(x.a)(g,2),y=m[0],v=m[1],w=Object(u.useState)(!0),L=Object(x.a)(w,2),S=L[0],M=(L[1],Object(u.useState)(!0)),R=Object(x.a)(M,2),D=R[0],P=(R[1],Object(u.useState)(null)),z=Object(x.a)(P,2),k=z[0],T=z[1];Object(u.useEffect)((function(){if(n){var e=Array.isArray(n)?Object.keys(n[0]).length-1:Object.keys(n).length-1;y!==e&&v(e)}}),[n]);var C=Object(u.useMemo)((function(){for(var e=[],n=0;n<y;n++){var r="";switch(t){case o.MonthlyTemperatures:r=0===n?"Low":"High";break;case o.SunshineHours:r="Sunshine";break;case o.HourlyTemperatures:r="Temperature";break;case o.DaylightData:r="Daylight";break;case o.ClearnessData:r="Clearness";break;case o.DailyRadiationSensorData:case o.YearlyRadiationSensorData:r="Radiation"}var i=null===k||k===r?1:.25;e.push(Object(I.jsx)(Tt.a,{name:r,dataKey:r,fill:O||ee[n],opacity:i,isAnimationActive:!1},n))}return e}),[y,k]);return Object(I.jsx)(I.Fragment,{children:n&&Object(I.jsx)("div",{id:"bar-graph-"+i+"-"+a,style:{width:"100%",height:"".concat(r,"%"),position:"relative"},children:Object(I.jsx)("div",{style:{userSelect:"none",width:"100%",height:"100%",position:"absolute",top:0,left:0},children:Object(I.jsx)(Ct.a,{width:"100%",height:"100%",children:Object(I.jsxs)(Ut.a,{data:n,onMouseDown:function(e){},margin:{top:5,right:30,left:20,bottom:30},children:[Object(I.jsx)(Vt.a,{formatter:function(e){return e.toFixed(b)+" "+s}}),Object(I.jsx)(Et.a,{vertical:D,horizontal:S,stroke:"rgba(128, 128, 128, 0.3)"}),Object(I.jsx)(It.a,{x:p,stroke:"orange",strokeWidth:2}),Object(I.jsx)(Ht.a,{dataKey:i,children:Object(I.jsx)(At.a,{value:i+(c?" ("+c+")":""),offset:0,position:"bottom"})}),Object(I.jsx)(Ft.a,{domain:[d,j],children:Object(I.jsx)(At.a,{dx:-15,value:a+(s?" ("+s+")":""),offset:0,angle:-90,position:"center"})}),C,y>1&&Object(I.jsx)(Wt.a,{iconType:"plainline",verticalAlign:"top",height:36,onMouseLeave:function(e){T(null)},onMouseEnter:function(e){T(e.dataKey)}})]})})})})})},_t=n(321),Gt=n(519),Nt=["circle","square","triangle up","triangle down","triangle right","triangle left","star","diamond","hexagon"];!function(e){e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(Ne||(Ne={}));var Bt,Xt,Zt,Kt,qt,Jt,Qt,$t,en,tn,nn,on=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=Math.round(a.length/s);return t&&n&&i>0&&i%l===0?Object(I.jsx)("svg",{x:t-10*c,y:n-10*c,width:20*c,height:20*c,viewBox:"-10 -10 20 20",children:Object(I.jsx)("circle",{cx:"0",cy:"0",r:"3",style:{opacity:o,stroke:r,fill:"white",strokeWidth:1}})}):null},rn=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=Math.round(a.length/s);return t&&n&&i>0&&i%l===0?Object(I.jsx)("svg",{x:t-10*c,y:n-10*c,width:20*c,height:20*c,viewBox:"-10 -10 20 20",children:Object(I.jsx)("rect",{x:"-3",y:"-3",width:"6",height:"6",style:{opacity:o,stroke:r,fill:"white",strokeWidth:1}})}):null},an=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=e.direction,u=Math.round(a.length/s);if(t&&n&&i>0&&i%u===0){var d;switch(l){case Ne.UP:d="-4,2.5,4,2.5,0,-3.5";break;case Ne.LEFT:d="2.5,4,2.5,-4,-3.5,0";break;case Ne.RIGHT:d="-2.5,4,-2.5,-4,3.5,0";break;default:d="-4,-2.5,4,-2.5,0,3.5"}return Object(I.jsx)("svg",{x:t-10*c,y:n-10*c,width:20*c,height:20*c,viewBox:"-10 -10 20 20",children:Object(I.jsx)("polygon",{points:d,style:{opacity:o,stroke:r,fill:"white",strokeWidth:1}})})}return null},cn=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=Math.round(a.length/s);return t&&n&&i>0&&i%l===0?Object(I.jsx)("svg",{x:t-10*c,y:n-10*c,width:20*c,height:20*c,viewBox:"-10 -10 20 20",children:Object(I.jsx)("polygon",{points:"-3,0,0,5,3,0,0,-5",style:{opacity:o,stroke:r,fill:"white",strokeWidth:1}})}):null},sn=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=Math.round(a.length/s);if(t&&n&&i>0&&i%l===0){var u=.05*c;return Object(I.jsx)("svg",{x:t-100*u,y:n-100*u,width:300*u,height:300*u,viewBox:"0 0 300 300",children:Object(I.jsx)("polygon",{points:"100,10 40,180 190,60 10,60 160,180",style:{opacity:o,stroke:r,fill:r,strokeWidth:1}})})}return null},ln=function(e){var t=e.cx,n=e.cy,o=e.opacity,r=e.stroke,i=e.index,a=e.points,c=e.scale,s=e.numberOfSymbols,l=Math.round(a.length/s);if(t&&n&&i>0&&i%l===0){var u=.02*c;return Object(I.jsx)("svg",{x:t-150*u,y:n-150*u,width:300*u,height:300*u,viewBox:"0 0 300 300",children:Object(I.jsx)("polygon",{className:"hex",points:"300,150 225,280 75,280 0,150 75,20 225,20",style:{opacity:o,stroke:r,fill:"white",strokeWidth:1}})})}return null},un=function(e,t,n,o){switch(e){case"circle":return Object(I.jsx)(on,{scale:t,numberOfSymbols:n,opacity:o});case"square":return Object(I.jsx)(rn,{scale:t,numberOfSymbols:n,opacity:o});case"triangle up":return Object(I.jsx)(an,{scale:1.1*t,numberOfSymbols:n,direction:Ne.UP,opacity:o});case"triangle down":return Object(I.jsx)(an,{scale:1.1*t,numberOfSymbols:n,direction:Ne.DOWN,opacity:o});case"triangle right":return Object(I.jsx)(an,{scale:1.1*t,numberOfSymbols:n,direction:Ne.RIGHT,opacity:o});case"triangle left":return Object(I.jsx)(an,{scale:1.1*t,numberOfSymbols:n,direction:Ne.LEFT,opacity:o});case"star":return Object(I.jsx)(sn,{scale:1.25*t,numberOfSymbols:n,opacity:o});case"diamond":return Object(I.jsx)(cn,{scale:1.1*t,numberOfSymbols:n,opacity:o});case"hexagon":return Object(I.jsx)(ln,{scale:1.3*t,numberOfSymbols:n,opacity:o})}},dn=function(e){var t=e.type,n=e.dataSource,r=e.height,i=e.labelX,a=e.labelY,c=e.unitX,s=e.unitY,l=e.yMin,d=void 0===l?"auto":l,h=e.yMax,j=void 0===h?"auto":h,f=e.curveType,b=void 0===f?"linear":f,p=e.referenceX,O=e.fractionDigits,g=void 0===O?2:O,m=e.symbolCount,y=void 0===m?12:m,v=(Object(A.a)(e,["type","dataSource","height","labelX","labelY","unitX","unitY","yMin","yMax","curveType","referenceX","fractionDigits","symbolCount"]),Object(u.useState)(0)),w=Object(x.a)(v,2),L=w[0],S=w[1],M=Object(u.useState)(!0),R=Object(x.a)(M,2),D=R[0],P=(R[1],Object(u.useState)(!0)),z=Object(x.a)(P,2),k=z[0],T=(z[1],Object(u.useState)(null)),C=Object(x.a)(T,2),U=C[0],V=C[1],E=Object(u.useState)(2),H=Object(x.a)(E,2),F=H[0],W=(H[1],Object(u.useState)(1)),Y=Object(x.a)(W,2),_=Y[0];Y[1];Object(u.useEffect)((function(){if(n){var e=Array.isArray(n)?Object.keys(n[0]).length-1:Object.keys(n).length-1;L!==e&&S(e)}}),[n]);var G=Object(u.useMemo)((function(){for(var e,n=[],r=0;r<L;r++){var i="";switch(t){case o.MonthlyTemperatures:i=0===r?"Low":"High";break;case o.SunshineHours:i="Sunshine";break;case o.HourlyTemperatures:i="Temperature";break;case o.DaylightData:i="Daylight";break;case o.ClearnessData:i="Clearness";break;case o.DailyRadiationSensorData:case o.YearlyRadiationSensorData:i="Radiation"+(r+1)}var a=null===U||U===i?1:.25,c=un(Nt[r],_,y,a);0===r&&(e=c),n.push(Object(I.jsx)(_t.a,{type:b,name:i,dataKey:i,stroke:ee[r],opacity:a,strokeWidth:F,dot:y>0&&(c||e),isAnimationActive:!1},r))}return n}),[L,F,y,_,U]);return Object(I.jsx)(I.Fragment,{children:n&&Object(I.jsx)("div",{id:"line-graph-"+i+"-"+a,style:{width:"100%",height:"".concat(r,"%"),position:"relative"},children:Object(I.jsx)("div",{style:{userSelect:"none",width:"100%",height:"100%",position:"absolute",top:0,left:0},children:Object(I.jsx)(Ct.a,{width:"100%",height:"100%",children:Object(I.jsxs)(Gt.a,{data:n,onMouseDown:function(e){},margin:{top:5,right:30,left:20,bottom:30},children:[Object(I.jsx)(Vt.a,{formatter:function(e){return e.toFixed(g)+" "+s}}),Object(I.jsx)(Et.a,{vertical:k,horizontal:D,stroke:"rgba(128, 128, 128, 0.3)"}),Object(I.jsx)(It.a,{x:p,stroke:"orange",strokeWidth:2}),Object(I.jsx)(Ht.a,{dataKey:i,children:Object(I.jsx)(At.a,{value:i+(c?" ("+c+")":""),offset:0,position:"bottom"})}),Object(I.jsx)(Ft.a,{domain:[d,j],children:Object(I.jsx)(At.a,{dx:-15,value:a+(s?" ("+s+")":""),offset:0,angle:-90,position:"center"})}),G,L>1&&Object(I.jsx)(Wt.a,{iconType:"plainline",verticalAlign:"top",height:36,onMouseLeave:function(e){V(null)},onMouseEnter:function(e){V(e.dataKey)}})]})})})})})},hn=Pe.a.div(Bt||(Bt=Object(De.a)(["\n  position: fixed;\n  top: 80px;\n  right: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),jn=Pe.a.div(Xt||(Xt=Object(De.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 500px;\n  height: 500px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),fn=Pe.a.div(Zt||(Zt=Object(De.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),bn=function(e){var t=e.city,n=e.graphs,r=Object(A.a)(e,["city","graphs"]),i=E((function(e){return e.set})),a=E((function(e){return e.getWeather})),c=E((function(e){return e.date})),s=Object(u.useState)({x:0,y:0}),l=Object(x.a)(s,2),d=l[0],h=l[1],j=Object(u.useMemo)((function(){return n?Math.floor(100/n.length):100}),[n]),f=Object(u.useMemo)((function(){if(n){var e={};if(t){var r=a(t);r&&n.forEach((function(t){switch(e[t]=[],t){case o.MonthlyTemperatures:for(var n=0;n<12;n++)e[t].push({Month:te[n],Low:r.lowestTemperatures[n],High:r.highestTemperatures[n]});break;case o.SunshineHours:for(var i=0;i<12;i++)e[t].push({Month:te[i],Sunshine:r.sunshineHours[i]})}}))}return e}}),[n,t]),b=["Temperature","Temperature","Sunshine"],p=["\xb0C","\xb0C","Hours"],O=te[Math.floor(k.daysIntoYear(c)/365*12)];return Object(I.jsx)(at.a,{handle:".handle",bounds:"parent",axis:"both",position:d,onDrag:function(e,t){h({x:t.x,y:t.y})},onStart:function(e,t){},onStop:function(e,t){},children:Object(I.jsx)(hn,{children:Object(I.jsxs)(jn,{children:[Object(I.jsxs)(fn,{className:"handle",children:[Object(I.jsxs)("span",{children:["Weather: ",t]}),Object(I.jsx)("span",{style:{cursor:"pointer"},onClick:function(){i((function(e){e.showWeatherPanel=!1}))},children:"Close"})]}),Object(I.jsx)(I.Fragment,{children:n.map((function(e){return e===o.SunshineHours?Object(I.jsx)(Yt,Object(g.a)({type:e,dataSource:f[e],height:j,labelX:"Month",labelY:b[e],unitY:p[e],yMin:0,fractionDigits:0,referenceX:O,color:"#FFD700"},r),e):Object(I.jsx)(dn,Object(g.a)({type:e,dataSource:f[e],height:j,labelX:"Month",labelY:b[e],unitY:p[e],fractionDigits:0,referenceX:O},r),e)}))})]})})})},pn=Pe.a.div(Kt||(Kt=Object(De.a)(["\n  position: fixed;\n  top: 80px;\n  right: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),xn=Pe.a.div(qt||(qt=Object(De.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 500px;\n  height: 650px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n"]))),On=Pe.a.div(Jt||(Jt=Object(De.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),gn=function(e){var t=e.city,n=Object(A.a)(e,["city"]),r=E((function(e){return e.set})),i=E((function(e){return e.yearlyLightSensorData})),a=E((function(e){return e.date})),c=Object(u.useState)({x:0,y:0}),s=Object(x.a)(c,2),l=s[0],d=s[1],h=te[Math.floor(k.daysIntoYear(a)/365*12)];return Object(I.jsx)(at.a,{handle:".handle",bounds:"parent",axis:"both",position:l,onDrag:function(e,t){d({x:t.x,y:t.y})},onStart:function(e,t){},onStop:function(e,t){},children:Object(I.jsx)(pn,{children:Object(I.jsxs)(xn,{children:[Object(I.jsxs)(On,{className:"handle",children:[Object(I.jsxs)("span",{children:["Light Sensor: ",t]}),Object(I.jsx)("span",{style:{cursor:"pointer"},onClick:function(){r((function(e){e.showYearlyLightSensorPanel=!1}))},children:"Close"})]}),Object(I.jsx)(dn,Object(g.a)({type:o.DaylightData,dataSource:i.map((function(e){return{Month:e.Month,Daylight:e.Daylight}})),height:100,labelX:"Month",labelY:"Daylight",unitY:"Hours",yMin:0,curveType:"natural",fractionDigits:1,referenceX:h},n)),Object(I.jsx)(Yt,Object(g.a)({type:o.ClearnessData,dataSource:i.map((function(e){return{Month:e.Month,Clearness:e.Clearness}})),height:100,labelX:"Month",labelY:"Clearness",unitY:"%",yMin:0,yMax:100,fractionDigits:1,referenceX:h,color:"#66CDAA"},n)),Object(I.jsx)(dn,Object(g.a)({type:o.YearlyRadiationSensorData,dataSource:i.map((function(e){e.Daylight,e.Clearness;return Object(A.a)(e,["Daylight","Clearness"])})),height:100,labelX:"Month",labelY:"Radiation",unitY:"kWh/m\xb2/day",yMin:0,curveType:"natural",fractionDigits:2,referenceX:h},n))]})})})},mn=Pe.a.div(Qt||(Qt=Object(De.a)(["\n  position: fixed;\n  top: 80px;\n  right: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),yn=Pe.a.div($t||($t=Object(De.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 600px;\n  height: 300px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n"]))),vn=Pe.a.div(en||(en=Object(De.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: move;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),wn=function(e){var t=e.city,n=Object(A.a)(e,["city"]),r=E((function(e){return e.set})),i=E((function(e){return e.dailyLightSensorData})),a=new Date(E((function(e){return e.date}))),c=Object(u.useState)({x:0,y:0}),s=Object(x.a)(c,2),l=s[0],d=s[1];return Object(I.jsx)(at.a,{handle:".handle",bounds:"parent",axis:"both",position:l,onDrag:function(e,t){d({x:t.x,y:t.y})},onStart:function(e,t){},onStop:function(e,t){},children:Object(I.jsx)(mn,{children:Object(I.jsxs)(yn,{children:[Object(I.jsxs)(vn,{className:"handle",children:[Object(I.jsxs)("span",{children:["Light Sensor: ",t," | ",pt()(a).format("MM/DD")]}),Object(I.jsx)("span",{style:{cursor:"pointer"},onClick:function(){r((function(e){e.showDailyLightSensorPanel=!1}))},children:"Close"})]}),Object(I.jsx)(dn,Object(g.a)({type:o.DailyRadiationSensorData,dataSource:i,height:100,labelX:"Hour",labelY:"Radiation",unitY:"kWh/m\xb2/day",yMin:0,curveType:"linear",fractionDigits:2,symbolCount:24,referenceX:a.getHours()},n))]})})})},Ln=function(e){var t=e.city,n=e.dailyLightSensorDataFlag,o=e.yearlyLightSensorDataFlag,r=E((function(e){return e.world})),a=E((function(e){return e.elements})),c=E((function(e){return e.getWeather})),s=new Date(E((function(e){return e.date}))),l=E((function(e){return e.latitude})),d=E((function(e){return e.timesPerHour})),h=E((function(e){return e.setDailyLightSensorData})),j=E((function(e){return e.setYearlyLightSensorData})),f=Object(O.e)().scene,b=c(null!==t&&void 0!==t?t:"Boston MA, USA"),p=t?c(t).elevation:0,g=60/d,v=Object(u.useMemo)((function(){return new z.Raycaster}),[]);Object(u.useEffect)((function(){a&&a.length>0&&L()}),[n]),Object(u.useEffect)((function(){a&&a.length>0&&M()}),[o]);var w=function(e,t,n){v.set(k.modelToView(t),k.modelToView(n));var o=f.children.filter((function(e){return"Content"===e.name}));if(o.length>0){var r,i=o[0].children,a=[],c=Object(m.a)(i);try{for(c.s();!(r=c.n()).done;){var s=r.value;a.push.apply(a,Object(y.a)(s.children.filter((function(e){return e.castShadow}))))}}catch(l){c.e(l)}finally{c.f()}return v.intersectObjects(a).length>0}return!1},L=function(){var e,t=new Map,n=0,o=Object(m.a)(a);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.type===i.Sensor&&(t.set("Radiation"+(n+1),S(r)),n++)}}catch(f){o.e(f)}finally{o.f()}for(var c=[],s=0;s<24;s++){var l={};l.Hour=s;for(var u=1;u<=n;u++){var d,j="Radiation"+u;l[j]=null===(d=t.get(j))||void 0===d?void 0:d[s]}c.push(l)}h(c)},S=function(e){for(var t=new z.Vector3(e.cx,e.cy,e.cz),n=new z.Vector3(e.normal[0],e.normal[1],e.normal[2]),o=new Array(24).fill(0),i=s.getFullYear(),a=s.getMonth(),c=s.getDate(),u=k.dayOfYear(s),h=0,j=0;j<24;j++)for(var f=0;f<d;f++){var x=new Date(i,a,c,j,f*g),O=ye(x,l);if(O.z>0){h++;var m=we(O,u,p,V.SPHERE_MODEL),y=n.dot(O);y>0&&(w(0,t,O)||(o[j]+=y*m)),o[j]+=Le(r.ground,a,n,m)}}var v=h*g/60,L=b.sunshineHours[a]/(30*v);return o.map((function(e){return e*L/d}))},M=function(){var e,t=[],n=Object(m.a)(a);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.type===i.Sensor&&t.push(R(o))}}catch(b){n.e(b)}finally{n.f()}for(var r=[],c=0;c<12;c++){var s={};s.Month=te[c];var l,u=Object(m.a)(t.entries());try{for(u.s();!(l=u.n()).done;){var d=Object(x.a)(l.value,2),h=d[0],f=d[1];s.Daylight=f[c].Daylight,s.Clearness=f[c].Clearness,s["Radiation"+(h+1)]=f[c].Radiation}}catch(b){u.e(b)}finally{u.f()}r.push(s)}j(r)},R=function(e){for(var t=[],n=new z.Vector3(e.cx,e.cy,e.cz),o=new z.Vector3(e.normal[0],e.normal[1],e.normal[2]),i=s.getFullYear(),a=0;a<12;a++){for(var c=new Date(i,a,15),u=k.dayOfYear(c),h=0,j=0,f=0;f<24;f++)for(var x=0;x<d;x++){var O=new Date(i,a,15,f,x*g),m=ye(O,l);if(m.z>0){j++;var y=we(m,u,p,V.SPHERE_MODEL),v=o.dot(m);v>0&&(w(0,n,m)||(h+=v*y)),h+=Le(r.ground,a,o,y)}}var L=j*g/60,S=b.sunshineHours[c.getMonth()]/(30*L);h*=S,h/=d,t.push({Month:te[a],Daylight:L,Clearness:100*S,Radiation:h})}return t};return Object(I.jsx)(I.Fragment,{})},Sn=n(135),Mn=Pe.a.div(tn||(tn=Object(De.a)(["\n  position: fixed;\n  top: 4px;\n  left: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),Rn=function(e){var t=e.orbitControls,n=E((function(e){return e.set})),o=E((function(e){return e.autoRotate})),r=E((function(e){return e.showHeliodonPanel}));return Object(I.jsx)(Mn,{children:Object(I.jsxs)(qe.b,{direction:"horizontal",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("span",{style:{paddingRight:"10px"},children:"Spin"}),Object(I.jsx)(Je.a,{title:"Spin view",checked:o,onChange:function(e){n((function(t){t.autoRotate=e}))}})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("span",{style:{paddingRight:"10px",paddingLeft:"10px"},children:"Heliodon"}),Object(I.jsx)(Je.a,{title:"Show heliodon",checked:r,onChange:function(e){n((function(t){t.showHeliodonPanel=e}))}})]}),Object(I.jsx)("div",{children:Object(I.jsx)(Sn.a,{type:"primary",title:"Reset view",onClick:function(){t&&t.reset()},children:" Reset "})})]})})},Dn=function(e){var t=e.top,n=e.height,o=e.color,r=t+56+"px",i=t+110+"px",a=t+220+"px";return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{style:{position:"absolute",borderRadius:"20px",border:"thin",textAlign:"center",left:"15%",right:"15%",top:t+"px",height:(null!==n&&void 0!==n?n:300)+"px"},children:[Object(I.jsx)("h2",{style:{marginTop:"20px",color:o},children:"This product is brought to you by"}),Object(I.jsxs)("p",{style:{fontSize:"12px",color:o},children:[Object(I.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://intofuture.org/aladdin-terms.html",style:{color:o},children:"Terms of Service"}),"\xa0\xa0\xa0|\xa0\xa0\xa0",Object(I.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://intofuture.org/aladdin-privacy.html",style:{color:o},children:"Privacy Policy"})]})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("hr",{style:{position:"absolute",left:"10%",width:"80%",marginTop:r,color:o}}),Object(I.jsx)("table",{style:{position:"absolute",border:"none",top:i,left:"10%",width:"80%",fontSize:"small",color:o},children:Object(I.jsx)("tbody",{children:Object(I.jsxs)("tr",{style:{verticalAlign:"top"},children:[Object(I.jsxs)("td",{children:[Object(I.jsx)("h3",{style:{color:o},children:"Software"}),"Charles Xie",Object(I.jsx)("br",{})]}),Object(I.jsxs)("td",{children:[Object(I.jsx)("h3",{style:{color:o},children:"Content"}),"Rundong Jiang",Object(I.jsx)("br",{}),"Charles Xie",Object(I.jsx)("br",{})]}),Object(I.jsxs)("td",{children:[Object(I.jsx)("h3",{style:{color:o},children:"Research"}),"Shannon Sung",Object(I.jsx)("br",{}),"Charles Xie",Object(I.jsx)("br",{})]}),Object(I.jsxs)("td",{children:[Object(I.jsx)("h3",{style:{color:o},children:"Support"}),"Rundong Jiang",Object(I.jsx)("br",{})]})]})})})]}),Object(I.jsx)("div",{style:{position:"absolute",left:"10%",marginRight:"10%",top:a,fontSize:"small",textAlign:"justify",color:o},children:"The National Science Foundation (NSF) of the United States generously provided funding for the research and development of this product through grant numbers 1918847, 2105695, and 2131097. Any opinions, findings, and conclusions or recommendations expressed in this product, however, are those of the authors and do not necessarily reflect the views of NSF."})]})},Pn=Pe.a.div(nn||(nn=Object(De.a)(["\n  position: absolute;\n  top: 80px;\n  left: 10px;\n  display: flex;\n  width: 600px;\n  height: 400px;\n  flex-direction: column;\n  align-items: center;\n  z-index: 9;\n  border-radius: 10px;\n  background: dimgray;\n  box-shadow: 3px 3px 3px 3px black;\n"]))),zn=function(e){var t=e.openAboutUs;return Object(I.jsxs)(Pn,{children:[Object(I.jsx)(Dn,{top:10,color:"antiquewhite"}),Object(I.jsx)("div",{style:{position:"absolute",fontSize:"medium",color:"antiquewhite",cursor:"pointer",bottom:"10px"},onClick:function(){t(!1)},children:"Close"})]})},kn=function(){var e=E((function(e){return e.set})),t=E((function(e){return e.world})),n=E((function(e){return e.loadWeatherData})),r=E((function(e){return e.getClosestCity})),i=E((function(e){return e.showGroundPanel})),a=E((function(e){return e.showHeliodonPanel})),c=E((function(e){return e.showWeatherPanel})),s=E((function(e){return e.showDailyLightSensorPanel})),l=E((function(e){return e.showYearlyLightSensorPanel})),d=E((function(e){return e.autoRotate})),h=E((function(e){return e.axes})),j=E((function(e){return e.grid})),f=E((function(e){return e.enableOrbitController})),g=E((function(e){return e.groundImage})),m=E((function(e){return e.groundColor})),y=E((function(e){return e.theme})),v=E((function(e){return e.heliodon})),w=E((function(e){return e.latitude})),L=E((function(e){return e.longitude})),S=E((function(e){return e.weatherData})),M=new Date(E((function(e){return e.date}))),R=Object(u.useState)(0),D=Object(x.a)(R,2),P=D[0],T=D[1],C=Object(u.useState)(0),U=Object(x.a)(C,2),V=U[0],A=U[1],F=Object(u.useState)(new z.Vector3(0,2,2)),W=Object(x.a)(F,2),Y=W[0],_=W[1],G=Object(u.useState)(!1),N=Object(x.a)(G,2),X=N[0],K=N[1],q=Object(u.useState)("Boston MA, USA"),J=Object(x.a)(q,2),$=J[0],ee=J[1],te=Object(u.useState)(!1),ne=Object(x.a)(te,2),oe=ne[0],re=ne[1],ie=Object(u.useState)(!1),ae=Object(x.a)(ie,2),ce=ae[0],ue=ae[1],de=Object(u.useState)(!1),he=Object(x.a)(de,2),je=he[0],fe=he[1],be=Object(u.useRef)();Object(u.useEffect)((function(){n()}),[]),Object(u.useEffect)((function(){_(ve(10,P,V,k.toRadians(w)).applyEuler(new z.Euler(-Math.PI/2,0,0)))}),[w,P,V]),Object(u.useEffect)((function(){ee(r(w,L))}),[w,L,S]);var pe=M.toString();Object(u.useMemo)((function(){T(me(M)),A(ge(M))}),[pe]);var xe=new z.Vector3(0,0,5),Oe=new z.Vector3;t&&(xe.set(t.cameraPosition.x,t.cameraPosition.y,t.cameraPosition.z),Oe.set(t.panCenter.x,t.panCenter.y,t.panCenter.z));var ye=Y.y>0,we=function(){e((function(e){e.timesPerHour=20})),re(!oe),e((function(e){e.showDailyLightSensorPanel=!0}))},Le=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(e){e.timesPerHour=20})),ue(!ce),e((function(e){e.showYearlyLightSensorPanel=!0}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),De=function(e){fe(e)};return console.log("x"),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsxs)("div",{style:{backgroundColor:"lightblue",height:"72px",paddingTop:"10px",fontSize:"30px"},children:[Object(I.jsx)("img",{alt:"Aladdin Logo",src:Me,height:"50px",style:{verticalAlign:"middle"}}),Object(I.jsx)("span",{style:{paddingLeft:"20px",verticalAlign:"middle"},children:"Aladdin"})]}),Object(I.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"10px",zIndex:999,fontSize:"12px",color:"white"},children:[Object(I.jsx)("img",{alt:"IFI Logo",src:Re,height:"40px",style:{verticalAlign:"bottom",cursor:"pointer"},title:"Go to Institute for Future Intelligence",onClick:yt}),"\xa0\xa0 Institute for Future Intelligence, \xa9",(new Date).getFullYear(),". Version ","0.0.1"]}),Object(I.jsx)(Ke,{collectDailyLightSensorData:we,collectYearlyLightSensorData:Le,openAboutUs:De}),Object(I.jsx)(Rn,{orbitControls:be.current}),i&&Object(I.jsx)(dt,{grid:j,groundImage:g,groundColor:m,setGrid:function(t){e((function(e){e.grid=t}))},setGroundImage:function(t){e((function(e){e.groundImage=t}))},setGroundColor:function(t){e((function(e){e.groundColor=t}))},changeLatitude:function(t){e((function(e){e.latitude=t}))},changeLongitude:function(t){e((function(e){e.longitude=t}))},changeMapZoom:function(t){e((function(e){e.mapZoom=t}))},changeMapTilt:function(t){e((function(e){e.mapTilt=t}))},changeMapType:function(t){e((function(e){e.mapType=t}))}}),a&&Object(I.jsx)(mt,{latitude:w,date:M,heliodon:v,animateSun:X,changeDate:function(t){var n=new Date(M);n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth()),n.setDate(t.getDate()),e((function(e){e.date=n.toString()}))},changeTime:function(t){var n=new Date(M);n.setHours(t.getHours(),t.getMinutes()),e((function(e){e.date=n.toString()}))},changeLatitude:function(t){e((function(e){e.latitude=t,e.address=""}))},setHeliodon:function(t){e((function(e){e.heliodon=t}))},setSunAnimation:function(e){K(e)}}),l&&Object(I.jsx)(gn,{city:$}),s&&Object(I.jsx)(wn,{city:$}),c&&Object(I.jsx)(bn,{city:$,graphs:[o.MonthlyTemperatures,o.SunshineHours]}),je&&Object(I.jsx)(zn,{openAboutUs:De}),Object(I.jsx)(Te.a,{trigger:["contextMenu"],overlay:Object(I.jsx)(kt,{city:$,collectDailyLightSensorData:we,collectYearlyLightSensorData:Le}),children:Object(I.jsx)("div",{children:Object(I.jsxs)(O.a,{shadows:!0,camera:{position:xe,fov:45},style:{height:"calc(100vh - 70px)",backgroundColor:"black"},children:[Object(I.jsx)(H,{enabled:f,autoRotate:d,panCenter:Oe,orbitControlsRef:be}),Object(I.jsxs)(u.Suspense,{fallback:null,children:[Object(I.jsx)(se,{}),Object(I.jsx)("ambientLight",{intensity:.25,name:"Ambient Light"}),Object(I.jsx)("directionalLight",{name:"Directional Light",color:"white",position:[Y.x,Y.y,Y.z],intensity:ye?.5:0,castShadow:!0,"shadow-mapSize-height":512,"shadow-mapSize-width":512}),(j||!f)&&Object(I.jsx)("gridHelper",{name:"Grid",args:[100,100,"gray","gray"]}),Object(I.jsx)(Q,{}),Object(I.jsx)(Ln,{city:$,dailyLightSensorDataFlag:oe,yearlyLightSensorDataFlag:ce}),h&&Object(I.jsx)(Z,{}),Object(I.jsx)(le,{}),g&&Object(I.jsx)(Mt,{}),Object(I.jsx)(B,{theme:y,night:!ye}),v&&Object(I.jsx)(Se,{hourAngle:P,declinationAngle:V,radius:10,date:M,latitude:k.toRadians(w)})]})]})})},"canvas-context-menu"),Object(I.jsx)(Lt,{})]})},Tn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,529)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),i(e),a(e)}))};j.a.render(Object(I.jsx)(d.a.StrictMode,{children:Object(I.jsx)(kn,{})}),document.getElementById("root")),Tn()}},[[504,1,2]]]);
//# sourceMappingURL=main.170550b9.chunk.js.map