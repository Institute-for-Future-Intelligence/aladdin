(this.webpackJsonpaladdin=this.webpackJsonpaladdin||[]).push([[0],{328:function(e,t,n){},329:function(e,t,n){},493:function(e,t,n){"use strict";n.r(t);var i,o,r,c=n(0),a=n.n(c),s=n(46),l=n.n(s),u=(n(328),n(22)),d=(n(329),n(61)),h=n(32),j=n(174),b=n(231),f=n(230),x=n(4),p=n.p+"static/media/weather.55ddf5ca.csv",O=n(278),g=n.n(O),m=n(5),v=n(11),y=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,null,[{key:"UNIT_VECTOR_POS_X",get:function(){return new x.Vector3(1,0,0)}},{key:"UNIT_VECTOR_NEG_X",get:function(){return new x.Vector3(-1,0,0)}},{key:"UNIT_VECTOR_POS_Y",get:function(){return new x.Vector3(0,1,0)}},{key:"UNIT_VECTOR_NEG_Y",get:function(){return new x.Vector3(0,-1,0)}},{key:"UNIT_VECTOR_POS_Z",get:function(){return new x.Vector3(0,0,1)}},{key:"UNIT_VECTOR_NEG_Z",get:function(){return new x.Vector3(0,0,-1)}},{key:"ZERO_TOLERANCE",get:function(){return 1e-4}},{key:"HALF_PI",get:function(){return Math.PI/2}},{key:"TWO_PI",get:function(){return 2*Math.PI}},{key:"toRadians",value:function(e){return e*(Math.PI/180)}},{key:"toDegrees",value:function(e){return e*(180/Math.PI)}},{key:"sphericalToCartesianZ",value:function(e){var t=e.x*Math.cos(e.z),n=t*Math.cos(e.y),i=t*Math.sin(e.y),o=e.x*Math.sin(e.z);return e.set(n,i,o),e}},{key:"getDistance",value:function(t,n,i,o){return t=e.toRadians(t),n=e.toRadians(n),i=e.toRadians(i),o=e.toRadians(o),Math.acos(Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos(Math.abs(t-i)))}},{key:"daysIntoYear",value:function(e){var t=new Date(e),n=new Date(t.getFullYear(),0,0),i=t.getTime()-n.getTime();return Math.floor(i/864e5)}}]),e}(),w=n(279),S=n(283);Object(d.b)({TextSprite:w.a}),Object(d.b)({OrbitControls:S.a}),function(e){e[e.HourlyTemperatures=0]="HourlyTemperatures",e[e.MonthlyTemperatures=1]="MonthlyTemperatures",e[e.SunshineHours=2]="SunshineHours"}(i||(i={})),function(e){e.Default="Default",e.Desert="Desert",e.Grassland="Grassland"}(o||(o={})),function(e){e.Sky="Sky",e.Ground="Ground",e.Foundation="Foundation",e.Sensor="Sensor",e.Cuboid="Cuboid"}(r||(r={})),Object(f.b)();var M,k,z,C,T,I,P,W=Object(j.a)(Object(b.devtools)(Object(b.persist)((function(e,t,n){var i=function(t){return e(Object(f.a)(t))};return{set:i,showGroundPanel:!1,showHeliodonPanel:!1,showWeatherPanel:!1,grid:!1,axes:!0,groundImage:!1,groundColor:"forestgreen",theme:"Default",heliodon:!1,address:"Natick, MA",latitude:42.2844063,longitude:-71.3488548,mapZoom:16,mapType:"roadmap",mapTilt:0,mapWeatherStations:!1,date:new Date(2021,5,22,12).toString(),weatherData:{},worlds:{},getWorld:function(e){return t().worlds[e]},createNewWorld:function(){i((function(e){var t=[],n={type:r.Foundation,cx:0,cy:0,lx:2,ly:2,height:.1,id:"f1"},i={type:r.Cuboid,cx:0,cy:3,lx:2,ly:2,height:4,id:"c1"},o={type:r.Sensor,cx:2,cy:2,lx:.05,ly:.05,height:.01,id:"s1",light:!0,heatFlux:!1};t.push(n),t.push(i),t.push(o);var c={name:"default",elements:t,cameraPosition:new x.Vector3(0,0,5)};e.worlds[c.name]=c}))},clickObjectType:null,getSelectedElement:function(){var e,n=t().worlds.default.elements,i=Object(h.a)(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.selected)return o}}catch(r){i.e(r)}finally{i.f()}return null},loadWeatherData:function(){var e=[];g.a.parse(p,{download:!0,complete:function(t){var n,o=Object(h.a)(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(Array.isArray(r)&&r.length>1){for(var c=[],a=[],s=[],l=5;l<29;l++)(l-5)%2===0?c.push(parseFloat(r[l].trim())):a.push(parseFloat(r[l].trim()));for(var u=29;u<41;u++)s.push(parseFloat(r[u].trim()));var d={city:r[0].trim(),country:r[1].trim(),longitude:parseFloat(r[2].trim()),latitude:parseFloat(r[3].trim()),elevation:parseFloat(r[4].trim()),lowestTemperatures:c,highestTemperatures:a,sunshineHours:s};e.push(d)}}}catch(j){o.e(j)}finally{o.f()}i((function(t){var n,i=Object(h.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.weatherData[o.city+", "+o.country]=o}}catch(j){i.e(j)}finally{i.f()}}))}})},getWeather:function(e){return t().weatherData[e]},getClosestCity:function(e,n){var i,o=Number.MAX_VALUE,r=null,c=t().weatherData;for(var a in c)c.hasOwnProperty(a)&&(i=y.getDistance(n,e,c[a].longitude,c[a].latitude))<o&&(o=i,r=a);return r}}}),{name:"aladdin-storage"}))),D=n(1),F=function(){var e=W((function(e){return e.set})),t=Object(d.e)(),n=t.camera,i=t.gl.domElement,o=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=o.current;return e&&(e.target.set(0,0,0),e.addEventListener("end",r)),function(){null===e||void 0===e||e.removeEventListener("end",r)}}));var r=function(){e((function(e){var t=e.worlds.default;t&&(t.cameraPosition.x=n.position.x,t.cameraPosition.y=n.position.y,t.cameraPosition.z=n.position.z)}))};return Object(D.jsx)("orbitControls",{ref:o,args:[n,i],enableZoom:!0,maxAzimuthAngle:Math.PI,minAzimuthAngle:-Math.PI})},A=n(24),E=n(50),R=n.p+"static/media/daysky.66925efd.jpg",V=n.p+"static/media/nightsky.2ee37da6.jpg",H=n.p+"static/media/desert.e1e10657.jpg",G=n.p+"static/media/desert-night.6f0f274c.jpg",L=n.p+"static/media/grassland.d74bba81.jpg",_=n.p+"static/media/grassland-night.fa2ff11e.jpg",Z=function(e){var t=e.theme,n=void 0===t?"Default":t,i=e.night,o=void 0!==i&&i,a=Object(E.a)(e,["theme","night"]),s=W((function(e){return e.set})),l=Object(c.useRef)(null),u=Object(c.useMemo)((function(){var e,t=new x.TextureLoader;switch(n){case"Desert":e=t.load(o?G:H);break;case"Grassland":e=t.load(o?_:L);break;default:e=t.load(o?V:R)}return e}),[n,o]),d=function(e){e.intersections.length>0&&(e.intersections[0].object===l.current&&(s((function(e){var t=e.worlds.default;if(t){var n,i=Object(h.a)(t.elements);try{for(i.s();!(n=i.n()).done;)n.value.selected=!1}catch(o){i.e(o)}finally{i.f()}}})),s((function(e){e.clickObjectType=r.Sky}))))};return Object(D.jsxs)("mesh",Object(A.a)(Object(A.a)({},a),{},{ref:l,name:"Sky",scale:1,onContextMenu:function(e){d(e)},onClick:function(e){d(e)},children:[Object(D.jsx)("sphereGeometry",{args:[1e3,16,16,0,2*Math.PI,0,Math.PI/2+.01]}),Object(D.jsx)("meshBasicMaterial",{map:u,side:x.DoubleSide,opacity:1,color:"skyblue"})]}))},B=n(513),N=function(e){var t=e.lineWidth,n=void 0===t?1:t,i=e.endPoint,o=void 0===i?1e3:i;return Object(D.jsxs)("mesh",{children:[Object(D.jsx)(B.a,{points:[new x.Vector3(-o,0,0),new x.Vector3(o,0,0)],color:"red",lineWidth:n}),Object(D.jsx)(B.a,{points:[new x.Vector3(0,-o,0),new x.Vector3(0,o,0)],color:"green",lineWidth:n}),Object(D.jsx)(B.a,{points:[new x.Vector3(0,0,-o),new x.Vector3(0,0,o)],color:"blue",lineWidth:n})]})},Y=n(284),X=n.p+"static/media/compass.7ded737e.obj",U=n.p+"static/media/helvetiker_regular.typeface.9a3651b4.fnt",K=function(e){var t=e.scale,n=void 0===t?.01:t,i=Object(E.a)(e,["scale"]),o=Object(d.d)(Y.a,X),r=Object(d.d)(x.FontLoader,U),a=Object(c.useRef)(null),s={font:r,height:0,size:.005},l=new x.MeshBasicMaterial({color:"white"}),u=new x.MeshBasicMaterial({color:"red"}),h=Object(d.e)().camera;return Object(d.c)((function(e){if(a.current){var t=new x.Vector3(.88,-.8,.1).unproject(h);a.current.position.set(t.x,t.y,t.z)}})),Object(D.jsxs)("mesh",Object(A.a)(Object(A.a)({},i),{},{ref:a,rotation:new x.Euler(-Math.PI/2,0,0),children:[Object(D.jsx)("mesh",{position:[-.001,.02,0],material:l,children:Object(D.jsx)("textGeometry",{args:["N",s]})}),Object(D.jsx)("mesh",{position:[-.0015,-.025,0],material:l,children:Object(D.jsx)("textGeometry",{args:["S",s]})}),Object(D.jsx)("mesh",{position:[-.025,-.002,0],material:l,children:Object(D.jsx)("textGeometry",{args:["W",s]})}),Object(D.jsx)("mesh",{position:[.02,-.002,0],material:l,children:Object(D.jsx)("textGeometry",{args:["E",s]})}),Object(D.jsx)("primitive",{object:o,scale:n,material:u})]}))},J=n(498),q=function(e){var t=e.id,n=e.cx,i=e.cy,o=e.lx,r=void 0===o?1:o,a=e.ly,s=void 0===a?1:a,l=e.height,u=void 0===l?.1:l,d=e.color,j=void 0===d?"gray":d,b=e.lineColor,f=void 0===b?"black":b,p=e.lineWidth,O=void 0===p?.1:p,g=e.hovered,m=void 0!==g&&g,v=e.selected,y=void 0!==v&&v;i=-i;var w=W((function(e){return e.set})),S=Object(c.useRef)(),M=Object(c.useRef)(),k=Object(c.useRef)(),z=Object(c.useRef)(),C=Object(c.useRef)(),T=new x.Vector3(n-r/2,u/2,i-s/2),I=new x.Vector3(n-r/2,u/2,i+s/2),P=new x.Vector3(n+r/2,u/2,i-s/2),F=new x.Vector3(n+r/2,u/2,i+s/2),A=function(){w((function(e){var n=e.worlds.default;if(n){var i,o=Object(h.a)(n.elements);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.selected=r.id===t}}catch(c){o.e(c)}finally{o.f()}}}))},E=function(e){w((function(n){var i=n.worlds.default;if(i){var o,r=Object(h.a)(i.elements);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.id===t){c.hovered=e;break}}}catch(a){r.e(a)}finally{r.f()}}}))};return Object(D.jsxs)("group",{children:[Object(D.jsx)(J.a,{castShadow:!0,receiveShadow:!0,ref:S,name:"Foundation",onClick:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&A())},onContextMenu:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&A())},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&E(!0))},onPointerOut:function(e){E(!1)},args:[r,u,s],position:[n,u/2,i],children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:j})}),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(B.a,{points:[[T.x,u,T.z],[P.x,u,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,u,P.z],[F.x,u,F.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,u,F.z],[I.x,u,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,u,I.z],[T.x,u,T.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[T.x,0,T.z],[P.x,0,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,0,P.z],[F.x,0,F.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,0,F.z],[I.x,0,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,0,I.z],[T.x,0,T.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[T.x,0,T.z],[T.x,u,T.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,0,P.z],[P.x,u,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,0,I.z],[I.x,u,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,0,F.z],[F.x,u,F.z]],lineWidth:O,color:f})]}),y&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(J.c,{ref:M,args:[.1,6,6],position:T,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:k,args:[.1,6,6],position:I,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:z,args:[.1,6,6],position:P,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:C,args:[.1,6,6],position:F,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})})]}),m&&Object(D.jsx)("textSprite",{text:"Foundation",fontSize:90,fontFace:"Times Roman",textHeight:1,scale:[1,.2,.2],position:[n,u+.2,i]})]})},Q=function(e){var t=e.id,n=e.cx,i=e.cy,o=e.lx,r=void 0===o?1:o,a=e.ly,s=void 0===a?1:a,l=e.height,u=void 0===l?.1:l,d=e.color,j=void 0===d?"gray":d,b=e.lineColor,f=void 0===b?"black":b,p=e.lineWidth,O=void 0===p?.1:p,g=e.hovered,m=void 0!==g&&g,v=e.selected,y=void 0!==v&&v,w=e.showLabel,S=void 0===w||w;e.light,e.heatFlux;i=-i;var M=W((function(e){return e.set})),k=Object(c.useRef)(),z=Object(c.useRef)(),C=new x.Vector3(n,u/2,i),T=new x.Vector3(n-r/2,u/2,i-s/2),I=new x.Vector3(n-r/2,u/2,i+s/2),P=new x.Vector3(n+r/2,u/2,i-s/2),F=new x.Vector3(n+r/2,u/2,i+s/2),A=function(){M((function(e){var n=e.worlds.default;if(n){var i,o=Object(h.a)(n.elements);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.selected=r.id===t}}catch(c){o.e(c)}finally{o.f()}}}))},E=function(e){M((function(n){var i=n.worlds.default;if(i){var o,r=Object(h.a)(i.elements);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.id===t){c.hovered=e;break}}}catch(a){r.e(a)}finally{r.f()}}}))};return Object(D.jsxs)("group",{children:[Object(D.jsx)(J.a,{castShadow:!0,receiveShadow:!0,ref:k,name:"Foundation",onClick:function(e){e.intersections.length>0&&(e.intersections[0].object===k.current&&A())},onContextMenu:function(e){e.intersections.length>0&&(e.intersections[0].object===k.current&&A())},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===k.current&&E(!0))},onPointerOut:function(e){E(!1)},args:[r,u,s],position:[n,u/2,i],children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:j})}),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(B.a,{points:[[T.x,u,T.z],[P.x,u,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,u,P.z],[F.x,u,F.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,u,F.z],[I.x,u,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,u,I.z],[T.x,u,T.z]],color:f}),Object(D.jsx)(B.a,{points:[[T.x,0,T.z],[P.x,0,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,0,P.z],[F.x,0,F.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,0,F.z],[I.x,0,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,0,I.z],[T.x,0,T.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[T.x,0,T.z],[T.x,u,T.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[P.x,0,P.z],[P.x,u,P.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[I.x,0,I.z],[I.x,u,I.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[F.x,0,F.z],[F.x,u,F.z]],lineWidth:O,color:f})]}),y&&Object(D.jsx)(J.c,{ref:z,args:[.1,6,6],position:C,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),(m||S)&&Object(D.jsx)("textSprite",{text:"Sensor",fontSize:90,fontFace:"Times Roman",textHeight:1,scale:[.5,.2,.2],position:[n,u+.2,i]})]})},$=function(e){var t=e.id,n=e.cx,i=e.cy,o=e.lx,r=void 0===o?1:o,a=e.ly,s=void 0===a?1:a,l=e.height,u=void 0===l?1:l,d=e.color,j=void 0===d?"white":d,b=e.lineColor,f=void 0===b?"black":b,p=e.lineWidth,O=void 0===p?.1:p,g=e.hovered,m=void 0!==g&&g,v=e.selected,y=void 0!==v&&v;i=-i;var w=W((function(e){return e.set})),S=Object(c.useRef)(),M=Object(c.useRef)(),k=Object(c.useRef)(),z=Object(c.useRef)(),C=Object(c.useRef)(),T=Object(c.useRef)(),I=Object(c.useRef)(),P=Object(c.useRef)(),F=Object(c.useRef)(),A=new x.Vector3(n-r/2,u,i-s/2),E=new x.Vector3(n-r/2,u,i+s/2),R=new x.Vector3(n+r/2,u,i-s/2),V=new x.Vector3(n+r/2,u,i+s/2),H=new x.Vector3(n-r/2,0,i-s/2),G=new x.Vector3(n-r/2,0,i+s/2),L=new x.Vector3(n+r/2,0,i-s/2),_=new x.Vector3(n+r/2,0,i+s/2),Z=function(){w((function(e){var n=e.worlds.default;if(n){var i,o=Object(h.a)(n.elements);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.selected=r.id===t}}catch(c){o.e(c)}finally{o.f()}}}))},N=function(e){w((function(n){var i=n.worlds.default;if(i){var o,r=Object(h.a)(i.elements);try{for(r.s();!(o=r.n()).done;){var c=o.value;if(c.id===t){c.hovered=e;break}}}catch(a){r.e(a)}finally{r.f()}}}))};return Object(D.jsxs)("group",{children:[Object(D.jsx)(J.a,{castShadow:!0,receiveShadow:!0,ref:S,name:"Foundation",onClick:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&Z())},onContextMenu:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&Z())},onPointerOver:function(e){e.intersections.length>0&&(e.intersections[0].object===S.current&&N(!0))},onPointerOut:function(e){N(!1)},args:[r,u,s],position:[n,u/2,i],children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:j})}),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(B.a,{points:[[A.x,u,A.z],[R.x,u,R.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[R.x,u,R.z],[V.x,u,V.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[V.x,u,V.z],[E.x,u,E.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[E.x,u,E.z],[A.x,u,A.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[A.x,0,A.z],[R.x,0,R.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[R.x,0,R.z],[V.x,0,V.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[V.x,0,V.z],[E.x,0,E.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[E.x,0,E.z],[A.x,0,A.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[A.x,0,A.z],[A.x,u,A.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[R.x,0,R.z],[R.x,u,R.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[E.x,0,E.z],[E.x,u,E.z]],lineWidth:O,color:f}),Object(D.jsx)(B.a,{points:[[V.x,0,V.z],[V.x,u,V.z]],lineWidth:O,color:f})]}),y&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(J.c,{ref:M,args:[.1,6,6],position:A,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:k,args:[.1,6,6],position:E,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:z,args:[.1,6,6],position:R,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:C,args:[.1,6,6],position:V,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:T,args:[.1,6,6],position:H,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:I,args:[.1,6,6],position:G,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:P,args:[.1,6,6],position:L,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})}),Object(D.jsx)(J.c,{ref:F,args:[.1,6,6],position:_,children:Object(D.jsx)("meshStandardMaterial",{attach:"material",color:"white"})})]}),m&&Object(D.jsx)("textSprite",{text:"Box",fontSize:90,fontFace:"Times Roman",textHeight:1,scale:[.4,.2,.2],position:[n,u+.2,i]})]})},ee=function(e){var t=e.world;return Object(D.jsxs)("group",{children:[t.elements.filter((function(e){return e.type===r.Foundation})).map((function(e){return Object(D.jsx)(q,Object(A.a)({},e),e.id)})),t.elements.filter((function(e){return e.type===r.Sensor})).map((function(e){return Object(D.jsx)(Q,Object(A.a)({},e),e.id)})),t.elements.filter((function(e){return e.type===r.Cuboid})).map((function(e){return Object(D.jsx)($,Object(A.a)({},e),e.id)}))]})},te=function(){var e=W((function(e){return e.set})),t=W((function(e){return e.groundColor})),n=Object(c.useRef)(),i=function(){e((function(e){var t=e.worlds.default;if(t){var n,i=Object(h.a)(t.elements);try{for(i.s();!(n=i.n()).done;){n.value.selected=!1}}catch(o){i.e(o)}finally{i.f()}}}))};return Object(D.jsx)(J.b,{receiveShadow:!0,ref:n,name:"Ground",onContextMenu:function(t){t.intersections.length>0&&(t.intersections[0].object===n.current&&(i(),e((function(e){e.clickObjectType=r.Ground}))))},onClick:function(t){t.intersections.length>0&&(t.intersections[0].object===n.current&&(e((function(e){e.clickObjectType=r.Ground})),i()))},rotation:[-Math.PI/2,0,0],position:[0,-.01,0],args:[1e4,1e4],children:Object(D.jsx)("meshStandardMaterial",{side:x.DoubleSide,attach:"material",color:t})})},ne=23.45/180*Math.PI,ie=function(e){var t=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5);return ne*Math.sin(y.TWO_PI*(284+t)/365.25)},oe=function(e){return(60*e.getHours()+e.getMinutes()-720)/720*Math.PI},re=function(e,t,n,i){var o=Math.cos(n),r=Math.sin(n),c=Math.cos(i),a=Math.sin(i),s=Math.cos(t),l=Math.sin(t),u=Math.asin(r*a+o*s*c),d=l*o,h=c*r-s*o*a,j=Math.atan2(h,d),b=new x.Vector3(e,j,u);return y.sphericalToCartesianZ(b),b.x=-b.x,b},ce=function(e){var t=e.hourAngle,n=e.declinationAngle,i=e.radius,o=void 0===i?10:i,r=e.date,a=void 0===r?new Date:r,s=e.latitude,l=void 0===s?42/180*Math.PI:s;Object(c.useEffect)((function(){return function(){}}),[a,l]);var d=Object(c.useMemo)((function(){for(var e=[],t=[],n=2*Math.PI/72,i=0,r=0;r<y.TWO_PI+n/2;r+=n){var c=Math.min(r,y.TWO_PI),a=.05*o;e.push(y.sphericalToCartesianZ(new x.Vector3(o,c,0))),e.push(y.sphericalToCartesianZ(new x.Vector3(o+a,c,0))),e.push(y.sphericalToCartesianZ(new x.Vector3(o,c+n,0))),e.push(y.sphericalToCartesianZ(new x.Vector3(o+a,c,0))),e.push(y.sphericalToCartesianZ(new x.Vector3(o+a,c+n,0))),e.push(y.sphericalToCartesianZ(new x.Vector3(o,c+n,0)));var s=void 0;y.TWO_PI-c>y.ZERO_TOLERANCE&&(a=.05*o+(i%3===0?.2:0),(s=new x.Vector3(o,c,0)).z=.002,t.push(y.sphericalToCartesianZ(s)),(s=new x.Vector3(o+a,c,0)).z=.002,t.push(y.sphericalToCartesianZ(s))),i++}for(var l=3*e.length,u=new Float32Array(l),d=new Float32Array(l),h=new Float32Array(l),j=0;j<e.length;j++){var b=3*j;u[b]=e[j].x,u[b+1]=e[j].y,u[b+2]=e[j].z,d[b]=0,d[b+1]=1,d[b+2]=0;var f=Math.floor(j/18)%2===0?.2:1;h[b]=f,h[b+1]=f,h[b+2]=f}return[u,d,h,t]}),[o]),h=Object(u.a)(d,4),j=h[0],b=h[1],f=h[2],p=h[3],O=Object(c.useMemo)((function(){for(var e=y.TWO_PI/96,t=[],i=-Math.PI;i<Math.PI+e/2;i+=e){var r=re(o,i,n,l);r.z>-.1&&t.push(r)}return t}),[l,o,n]),g=function(e){for(var t=y.TWO_PI/96,n=[],i=-Math.PI;i<Math.PI+t/2;i+=t){var r=re(o,i,e,l);r.z>-.1&&n.push(r)}return n},m=Object(c.useMemo)((function(){for(var e=ie(new Date(2021,11,22)),t=(ie(new Date(2021,5,22))-e)/5,n=[],i=0;i<=5;i++)n.push(g(e+i*t));return n}),[l,o]),v=Object(c.useMemo)((function(){return re(o,t,n,l)}),[l,n,t,o]),w=Object(c.useMemo)((function(){for(var e=2*ne/12,t=y.TWO_PI/96,n=new x.BufferGeometry,i=0,r=[],c=[],a=-ne;a<ne-e/2;a+=e)for(var s=-Math.PI;s<Math.PI-t/2;s+=t){var u=s+t,d=a+e;u>Math.PI&&(u=Math.PI),d>ne&&(d=ne);var h=re(o,s,a,l),j=re(o,u,a,l),b=re(o,u,d,l),f=re(o,s,d,l);(h.z>=0||j.z>=0||b.z>=0||f.z>=0)&&(r.push(h,j,b,f),c.push(i),c.push(i+1),c.push(i+2),c.push(i),c.push(i+2),c.push(i+3),i+=4)}return n.setFromPoints(r),n.setIndex(new x.BufferAttribute(new Uint16Array(c),1)),n}),[l,o]);return Object(D.jsxs)("mesh",{rotation:new x.Euler(-Math.PI/2,0,0),children:[Object(D.jsxs)("mesh",{children:[Object(D.jsxs)("bufferGeometry",{attach:"geometry",children:[Object(D.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:j.length/3,array:j,itemSize:3}),Object(D.jsx)("bufferAttribute",{attachObject:["attributes","normal"],count:b.length/3,array:b,itemSize:3}),Object(D.jsx)("bufferAttribute",{attachObject:["attributes","color"],count:f.length/3,array:f,itemSize:3})]}),Object(D.jsx)("meshBasicMaterial",{side:x.DoubleSide,vertexColors:!0,polygonOffset:!0,polygonOffsetFactor:-.7,polygonOffsetUnits:-2})]}),Object(D.jsx)("lineSegments",{args:[(new x.BufferGeometry).setFromPoints(p),new x.MeshBasicMaterial({color:0})]}),Object(D.jsxs)("mesh",{children:[O.length>3&&Object(D.jsx)(B.a,{lineWidth:2,points:O,color:"yellow"}),m.filter((function(e){return e.length>3})).map((function(e,t){return Object(D.jsx)(B.a,{opacity:0===t||5===t?1:.5,lineWidth:0===t||5===t?1:.5,points:e,color:"#999"},t)})),Object(D.jsx)("mesh",{args:[w,new x.MeshBasicMaterial({side:x.DoubleSide,color:new x.Color(1,1,0),transparent:!0,opacity:.5,clippingPlanes:[new x.Plane(y.UNIT_VECTOR_POS_Y,0)]})]}),Object(D.jsx)("mesh",{position:v,args:[new x.SphereGeometry(.25,20,20),new x.MeshBasicMaterial({color:4294967040})]})]})]})},ae=n.p+"static/media/aladdin-logo.96b59d24.png",se=n.p+"static/media/ifi-logo.eb360016.png",le=n(55),ue=n(56),de=n(510),he=n(516),je=n(515);function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function xe(e,t){var n=e.title,i=e.titleId,o=fe(e,["title","titleId"]);return c.createElement("svg",be({t:1613755944969,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":5967,xmlnsXlink:"http://www.w3.org/1999/xlink",width:200,height:200,ref:t,"aria-labelledby":i},o),n?c.createElement("title",{id:i},n):null,M||(M=c.createElement("defs",null,c.createElement("style",{type:"text/css"}))),k||(k=c.createElement("path",{d:"M194.187431 235.50871m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5968})),z||(z=c.createElement("path",{d:"M347.505182 165.510915h552.305182v139.99559H347.505182z","p-id":5969})),C||(C=c.createElement("path",{d:"M194.187431 512.1129m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5970})),T||(T=c.createElement("path",{d:"M347.505182 442.115105h552.305182v139.99559H347.505182z","p-id":5971})),I||(I=c.createElement("path",{d:"M194.187431 788.49129m-69.997795 0a69.997795 69.997795 0 1 0 139.99559 0 69.997795 69.997795 0 1 0-139.99559 0Z","p-id":5972})),P||(P=c.createElement("path",{d:"M347.505182 718.719294h552.305182v139.99559H347.505182z","p-id":5973})))}var pe,Oe,ge,me,ve,ye,we,Se,Me,ke,ze=c.forwardRef(xe),Ce=(n.p,n(157),Object(ue.a)(ze)(pe||(pe=Object(le.a)(["\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  height: 40px;\n  width: 40px;\n  transition: 0.5s;\n  fill: brown;\n\n  &:hover {\n    fill: white;\n  }\n"])))),Te=function(){var e=W((function(e){return e.set})),t=W((function(e){return e.showGroundPanel})),n=W((function(e){return e.showWeatherPanel})),i=W((function(e){return e.showHeliodonPanel})),o=Object(D.jsxs)(de.a,{children:[Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:t,onChange:function(t){e((function(e){e.showGroundPanel=t.target.checked}))},children:"Ground Settings"})},"ground-panel-check-box"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:i,onChange:function(t){e((function(e){e.showHeliodonPanel=t.target.checked}))},children:"Heliodon Settings"})},"heliodon-panel-check-box"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:n,onChange:function(t){e((function(e){e.showWeatherPanel=t.target.checked}))},children:"Weather Data"})},"weather-panel-check-box")]});return Object(D.jsx)(je.a,{overlay:o,trigger:["click"],children:Object(D.jsx)(Ce,{})})},Ie=n(514),Pe=n(517),We=n(314),De=n(134),Fe={border:"1px solid",width:"400px",height:"400px"},Ae=function(e){var t=e.setLatitude,n=e.setLongitude,i=e.setZoom,o=e.setTilt,r=e.setType,a=W((function(e){return e.latitude})),s=W((function(e){return e.longitude})),l=W((function(e){return e.mapZoom})),d=W((function(e){return e.mapType})),h=W((function(e){return e.mapTilt})),j=Object(c.useState)(null),b=Object(u.a)(j,2),f=b[0],x=b[1],p=Object(c.useRef)(),O=Object(c.useRef)([]),g=W((function(e){return e.weatherData})),m=W((function(e){return e.mapWeatherStations})),v=Object(c.useState)(!1),y=Object(u.a)(v,2),w=y[0],S=y[1];Object(c.useEffect)((function(){}),[w]);var M=Object(c.useCallback)((function(e){x(e)}),[]),k=Object(c.useCallback)((function(e){x(null)}),[]),z={lat:a,lng:s};return Object(D.jsx)(De.a,{mapContainerStyle:Fe,mapTypeId:d,center:z,zoom:l,tilt:h,onLoad:M,onBoundsChanged:function(){f&&(p.current=f.getBounds(),m&&function(){if(p.current){for(var e in O.current.length=0,g)if(g.hasOwnProperty(e)){var t=g[e],n=new google.maps.LatLng(t.latitude,t.longitude);p.current.contains(n)&&O.current.push(n)}S(!w)}}())},onUnmount:k,onCenterChanged:function(){if(f){var e=f.getCenter(),i=e.lat();i!==a&&(null===t||void 0===t||t(i));var o=e.lng();o!==s&&(null===n||void 0===n||n(o))}},onZoomChanged:function(){if(f){var e=f.getZoom();e!==l&&(null===i||void 0===i||i(e))}},onTiltChanged:function(){if(f){var e=f.getTilt();e!==h&&(null===o||void 0===o||o(e))}},onMapTypeIdChanged:function(){if(f){var e=f.getMapTypeId();e!==d&&(null===r||void 0===r||r(e))}},children:Object(D.jsx)(D.Fragment,{children:m&&O.current.map((function(e,t){var n=.2*l;return Object(D.jsx)(De.b,{icon:{path:google.maps.SymbolPath.CIRCLE,strokeColor:"red",strokeWeight:n+2,scale:n},position:e},t)}))})})},Ee=Object(c.memo)(Ae),Re=n(499),Ve=Object(ue.a)(Re.a)(Oe||(Oe=Object(le.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 999;\n"]))),He=["places"],Ge=ue.a.div(ge||(ge=Object(le.a)(["\n  position: fixed;\n  top: 10px;\n  left: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),Le=ue.a.div(me||(me=Object(le.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 420px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),_e=ue.a.div(ve||(ve=Object(le.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),Ze=function(e){var t=e.grid,n=e.groundImage,i=e.groundColor,o=e.setGrid,r=e.setGroundImage,a=e.setGroundColor,s=e.changeLatitude,l=e.changeLongitude,u=e.changeMapZoom,d=e.changeMapTilt,h=e.changeMapType,j=W((function(e){return e.set})),b=W((function(e){return e.latitude})),f=W((function(e){return e.longitude})),x=W((function(e){return e.mapZoom})),p=W((function(e){return e.mapWeatherStations})),O=W((function(e){return e.address})),g=Object(c.useRef)(),m=Object(De.d)({id:"google-map-script",googleMapsApiKey:"AIzaSyCX6AmhM9d6R1ne9E7redd86YEahX_2Scs",libraries:He}),v=m.isLoaded,y=m.loadError;return Object(D.jsx)(Ge,{children:Object(D.jsxs)(Le,{children:[Object(D.jsxs)(_e,{children:[Object(D.jsx)("span",{children:"Ground Settings"}),Object(D.jsx)("span",{style:{cursor:"pointer"},onClick:function(){j((function(e){e.showGroundPanel=!1}))},children:"Close"})]}),Object(D.jsxs)(Ie.b,{direction:"vertical",children:[Object(D.jsxs)(Ie.b,{style:{padding:"20px"},align:"center",size:20,children:[Object(D.jsxs)(Ie.b,{direction:"vertical",children:[Object(D.jsxs)(Ie.b,{children:[Object(D.jsx)(Ie.b,{style:{width:"60px"},children:"Grid:"}),Object(D.jsx)(Pe.a,{title:"Show ground grid",checked:t,onChange:function(e){null===o||void 0===o||o(e)}})]}),Object(D.jsxs)(Ie.b,{children:[Object(D.jsx)(Ie.b,{style:{width:"60px"},children:"Image:"}),Object(D.jsx)(Pe.a,{title:"Show ground image",checked:n,onChange:function(e){null===r||void 0===r||r(e)}})]}),Object(D.jsxs)(Ie.b,{children:[Object(D.jsx)(Ie.b,{style:{width:"60px"},children:"Stations:"}),Object(D.jsx)(Pe.a,{title:"Show weather stations",checked:p,onChange:function(e){var t;t=e,j((function(e){e.mapWeatherStations=t}))}})]})]}),Object(D.jsxs)("div",{children:["Ground Color",Object(D.jsx)("br",{}),Object(D.jsx)(We.a,{color:i,onChangeComplete:function(e){null===a||void 0===a||a(e.hex)}})]})]}),v&&Object(D.jsx)(Ie.b,{children:Object(D.jsx)("div",{children:Object(D.jsx)(De.c,{onLoad:function(e){g.current=e},onPlacesChanged:function(){var e,t=null===(e=g.current)||void 0===e?void 0:e.getPlaces();t&&t.length>0&&j((function(e){var n=t[0].geometry;n&&(e.latitude=n.location.lat(),e.longitude=n.location.lng()),e.address=t[0].formatted_address}))},children:Object(D.jsx)("input",{type:"text",placeholder:O,style:{boxSizing:"border-box",border:"1px solid transparent",width:"400px",height:"32px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses",position:"relative"}})})})}),v?Object(D.jsx)(Ie.b,{children:Object(D.jsxs)("div",{children:[Object(D.jsx)(Ee,{setLatitude:s,setLongitude:l,setZoom:u,setTilt:d,setType:h}),"Coordinates: (",b.toFixed(4),"\xb0, ",f.toFixed(4),"\xb0), Zoom: ",x]})}):Object(D.jsx)(Ve,{}),y&&Object(D.jsx)(Ie.b,{children:Object(D.jsx)("div",{children:"Map cannot be loaded right now, sorry."})})]})]})})},Be=n(237),Ne=n(500),Ye=n(509),Xe=n(75),Ue=n.n(Xe),Ke=ue.a.div(ye||(ye=Object(le.a)(["\n  position: fixed;\n  top: 10px;\n  left: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),Je=ue.a.div(we||(we=Object(le.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 640px;\n  padding: 0;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),qe=ue.a.div(Se||(Se=Object(le.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),Qe=function(e){var t=e.heliodon,n=e.latitude,i=e.date,o=e.animateSun,r=e.setHeliodon,a=e.setSunAnimation,s=e.changeLatitude,l=e.changeDate,u=e.changeTime,d=W((function(e){return e.set})),h=Object(c.useRef)(0),j=Object(c.useRef)(-1);Object(c.useEffect)((function(){return h.current=requestAnimationFrame(b),function(){cancelAnimationFrame(h.current)}}),[o]);var b=function e(){if(o){h.current=requestAnimationFrame(e);var t=Date.now();if(t-j.current>100){var n=i.getDate();i.setHours(i.getHours(),i.getMinutes()+15),i.setDate(n),null===u||void 0===u||u(i),j.current=t}}};return Object(D.jsx)(Ke,{children:Object(D.jsxs)(Je,{children:[Object(D.jsxs)(qe,{children:[Object(D.jsx)("span",{children:"Heliodon Settings"}),Object(D.jsx)("span",{style:{cursor:"pointer"},onClick:function(){d((function(e){e.showHeliodonPanel=!1}))},children:"Close"})]}),Object(D.jsxs)(Ie.b,{style:{padding:"20px"},align:"baseline",size:20,children:[Object(D.jsxs)("div",{children:["Show",Object(D.jsx)("br",{}),Object(D.jsx)(Pe.a,{checked:t,onChange:function(e){null===r||void 0===r||r(e)}})]}),Object(D.jsxs)("div",{children:["Animate",Object(D.jsx)("br",{}),Object(D.jsx)(Pe.a,{checked:o,onChange:function(e){null===a||void 0===a||a(e)}})]}),Object(D.jsxs)("div",{children:["Date",Object(D.jsx)("br",{}),Object(D.jsx)(Be.a,{value:Ue()(i),onChange:function(e){e&&(null===l||void 0===l||l(e.toDate()))}})]}),Object(D.jsxs)("div",{children:["Time",Object(D.jsx)("br",{}),Object(D.jsx)(Ne.a,{value:Ue()(i,"HH:mm"),format:"HH:mm",onChange:function(e){e&&(null===u||void 0===u||u(e.toDate()))}})]}),Object(D.jsxs)("div",{children:["Latitude: ",n.toFixed(4),"\xb0",Object(D.jsx)(Ye.a,{style:{width:"150px"},marks:{"-90":"-90\xb0",0:"0\xb0",90:"90\xb0"},min:-90,max:90,tooltipVisible:!1,defaultValue:n,onChange:function(e){null===s||void 0===s||s(e)}})]})]})]})})},$e=["#8884d8","#f97356","#1bc32c","#c6502d","#82ca9d","#3eaec0","#627682","#445111"],et=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tt=(n(316),function(){window.open("https://intofuture.org","_blank")}),nt=n(297),it=n.n(nt),ot=function(){return Object(D.jsx)(it.a,{location:"bottom",buttonText:"Accept",cookieName:"AladdinCookieName",style:{background:"#2B373B",textAlign:"center",zIndex:99999},buttonStyle:{color:"#4e503b",fontSize:"12px"},expires:150,children:"By clicking Accept, you agree to our use of cookies to improve your experience with Aladdin."})},rt=n(501),ct=function(){var e,t=W((function(e){return e.latitude})),n=W((function(e){return e.longitude})),i=W((function(e){return e.mapZoom})),o=Object(rt.a)("https://maps.googleapis.com/maps/api/staticmap?maptype=satellite&center="+t+","+n+"&zoom="+i+"&size="+(e=640)+"x"+e+"&scale=2&key=AIzaSyCX6AmhM9d6R1ne9E7redd86YEahX_2Scs");return Object(D.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[Object(D.jsx)("planeBufferGeometry",{args:[100,100]}),Object(D.jsx)("meshStandardMaterial",{attach:"material",side:x.DoubleSide,map:o,opacity:1})]})},at=n(512),st=Object(ue.a)(de.a)(Me||(Me=Object(le.a)(["\n  padding: 0;\n  margin: 0;\n"]))),lt=st.SubMenu,ut={display:"block",height:"30px",paddingLeft:"10px",lineHeight:"30px"},dt=function(){var e=W((function(e){return e.set})),t=W((function(e){return e.getSelectedElement})),n=W((function(e){return e.axes})),i=W((function(e){return e.grid})),c=W((function(e){return e.theme})),a=W((function(e){return e.showHeliodonPanel})),s=W((function(e){return e.showGroundPanel})),l=W((function(e){return e.showWeatherPanel})),u=W((function(e){return e.clickObjectType})),d=t();switch(d?d.type:u){case r.Sky:return Object(D.jsxs)(st,{style:{padding:0,margin:0},children:[Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:n,onChange:function(t){e((function(e){e.axes=t.target.checked}))},children:"Axes"})},"axes"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:a,onChange:function(t){e((function(e){e.showHeliodonPanel=t.target.checked}))},children:"Heliodon Settings"})},"heliodon-settings"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:l,onChange:function(t){e((function(e){e.showWeatherPanel=t.target.checked}))},children:"Weather Data"})},"weather-data"),Object(D.jsx)(lt,{title:"Theme",children:Object(D.jsxs)(at.a.Group,{onChange:function(t){e((function(e){e.theme=t.target.value}))},value:c,style:{height:"105px"},children:[Object(D.jsx)(at.a,{style:ut,value:o.Default,children:"Default"}),Object(D.jsx)(at.a,{style:ut,value:o.Desert,children:"Desert"}),Object(D.jsx)(at.a,{style:ut,value:o.Grassland,children:"Grassland"})]})},"theme")]});case r.Foundation:return Object(D.jsxs)(st,{children:[Object(D.jsx)(de.a.Item,{children:"Copy"},"foundation-copy"),Object(D.jsx)(de.a.Item,{children:"Cut"},"foundation-cut")]});case r.Sensor:return Object(D.jsxs)(st,{children:[Object(D.jsx)(de.a.Item,{children:"Copy"},"cuboid-copy"),Object(D.jsx)(de.a.Item,{children:"Cut"},"cuboid-cut"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:null===d||void 0===d?void 0:d.light,onChange:function(t){e((function(e){}))},children:"Light"})},"sensor-light")]});case r.Cuboid:return Object(D.jsxs)(st,{children:[Object(D.jsx)(de.a.Item,{children:"Copy"},"cuboid-copy"),Object(D.jsx)(de.a.Item,{children:"Cut"},"cuboid-cut")]});default:return Object(D.jsxs)(st,{children:[Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:i,onChange:function(t){e((function(e){e.grid=t.target.checked}))},children:"Grid"})},"ground-grid"),Object(D.jsx)(de.a.Item,{children:Object(D.jsx)(he.a,{checked:s,onChange:function(t){e((function(e){e.showGroundPanel=t.target.checked}))},children:"Ground Settings"})},"ground-settings"),Object(D.jsx)(de.a.Item,{children:"Paste"},"ground-paste")]})}},ht=n(318),jt=n(505),bt=n(506),ft=n(155),xt=n(507),pt=n(307),Ot=n(192),gt=n(73),mt=n(193),vt=n(148),yt=function(e){var t=e.type,n=e.dataSource,o=e.height,r=e.labelX,a=e.labelY,s=e.unitX,l=e.unitY,d=e.fractionDigits,h=void 0===d?2:d,j=e.color,b=(Object(E.a)(e,["type","dataSource","height","labelX","labelY","unitX","unitY","fractionDigits","color"]),Object(c.useState)(0)),f=Object(u.a)(b,2),x=f[0],p=f[1],O=Object(c.useState)(!0),g=Object(u.a)(O,2),m=g[0],v=(g[1],Object(c.useState)(!0)),w=Object(u.a)(v,2),S=w[0],M=(w[1],Object(c.useState)(null)),k=Object(u.a)(M,2),z=k[0],C=k[1],T=W((function(e){return e.date}));Object(c.useEffect)((function(){if(n){var e=Array.isArray(n)?Object.keys(n[0]).length-1:Object.keys(n).length-1;x!==e&&p(e)}}),[n]);var I=Object(c.useMemo)((function(){for(var e=[],n=0;n<x;n++){var o="";switch(t){case i.MonthlyTemperatures:o=0===n?"Low":"High";break;case i.SunshineHours:o="Sunshine";break;case i.HourlyTemperatures:o="Temperature"}var r=null===z||z===o?1:.25;e.push(Object(D.jsx)(ht.a,{name:o,dataKey:o,fill:j||$e[n],opacity:r,isAnimationActive:!1},n))}return e}),[x,z]);return Object(D.jsx)(D.Fragment,{children:n&&Object(D.jsx)("div",{id:"bar-graph-"+r+"-"+a,style:{width:"100%",height:"".concat(o,"%"),position:"relative"},children:Object(D.jsx)("div",{style:{userSelect:"none",width:"100%",height:"100%",position:"absolute",top:0,left:0},children:Object(D.jsx)(jt.a,{width:"100%",height:"100%",children:Object(D.jsxs)(bt.a,{data:n,onMouseDown:function(e){},margin:{top:5,right:30,left:20,bottom:30},children:[Object(D.jsx)(ft.a,{formatter:function(e){return e.toFixed(h)+" "+l}}),Object(D.jsx)(xt.a,{vertical:S,horizontal:m,stroke:"rgba(128, 128, 128, 0.3)"}),Object(D.jsx)(pt.a,{x:et[Math.floor(y.daysIntoYear(T)/365*12)],stroke:"orange",strokeWidth:2}),Object(D.jsx)(Ot.a,{dataKey:r,children:Object(D.jsx)(gt.a,{value:r+(s?" ("+s+")":""),offset:0,position:"bottom"})}),Object(D.jsx)(mt.a,{domain:[0,"auto"],children:Object(D.jsx)(gt.a,{dx:-15,value:a+(l?" ("+l+")":""),offset:0,angle:-90,position:"center"})}),I,x>1&&Object(D.jsx)(vt.a,{iconType:"plainline",verticalAlign:"top",height:36,onMouseLeave:function(e){C(null)},onMouseEnter:function(e){C(e.dataKey)}})]})})})})})},wt=n(313),St=n(508),Mt=["circle","square","triangle up","triangle down","triangle right","triangle left","star","diamond","hexagon"];!function(e){e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(ke||(ke={}));var kt,zt,Ct,Tt=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=Math.round(c.length/s);return t&&n&&r>0&&r%l===0?Object(D.jsx)("svg",{x:t-10*a,y:n-10*a,width:20*a,height:20*a,viewBox:"-10 -10 20 20",children:Object(D.jsx)("circle",{cx:"0",cy:"0",r:"3",style:{opacity:i,stroke:o,fill:"white",strokeWidth:1}})}):null},It=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=Math.round(c.length/s);return t&&n&&r>0&&r%l===0?Object(D.jsx)("svg",{x:t-10*a,y:n-10*a,width:20*a,height:20*a,viewBox:"-10 -10 20 20",children:Object(D.jsx)("rect",{x:"-3",y:"-3",width:"6",height:"6",style:{opacity:i,stroke:o,fill:"white",strokeWidth:1}})}):null},Pt=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=e.direction,u=Math.round(c.length/s);if(t&&n&&r>0&&r%u===0){var d;switch(l){case ke.UP:d="-4,2.5,4,2.5,0,-3.5";break;case ke.LEFT:d="2.5,4,2.5,-4,-3.5,0";break;case ke.RIGHT:d="-2.5,4,-2.5,-4,3.5,0";break;default:d="-4,-2.5,4,-2.5,0,3.5"}return Object(D.jsx)("svg",{x:t-10*a,y:n-10*a,width:20*a,height:20*a,viewBox:"-10 -10 20 20",children:Object(D.jsx)("polygon",{points:d,style:{opacity:i,stroke:o,fill:"white",strokeWidth:1}})})}return null},Wt=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=Math.round(c.length/s);return t&&n&&r>0&&r%l===0?Object(D.jsx)("svg",{x:t-10*a,y:n-10*a,width:20*a,height:20*a,viewBox:"-10 -10 20 20",children:Object(D.jsx)("polygon",{points:"-3,0,0,5,3,0,0,-5",style:{opacity:i,stroke:o,fill:"white",strokeWidth:1}})}):null},Dt=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=Math.round(c.length/s);if(t&&n&&r>0&&r%l===0){var u=.05*a;return Object(D.jsx)("svg",{x:t-100*u,y:n-100*u,width:300*u,height:300*u,viewBox:"0 0 300 300",children:Object(D.jsx)("polygon",{points:"100,10 40,180 190,60 10,60 160,180",style:{opacity:i,stroke:o,fill:o,strokeWidth:1}})})}return null},Ft=function(e){var t=e.cx,n=e.cy,i=e.opacity,o=e.stroke,r=e.index,c=e.points,a=e.scale,s=e.numberOfSymbols,l=Math.round(c.length/s);if(t&&n&&r>0&&r%l===0){var u=.02*a;return Object(D.jsx)("svg",{x:t-150*u,y:n-150*u,width:300*u,height:300*u,viewBox:"0 0 300 300",children:Object(D.jsx)("polygon",{className:"hex",points:"300,150 225,280 75,280 0,150 75,20 225,20",style:{opacity:i,stroke:o,fill:"white",strokeWidth:1}})})}return null},At=function(e,t,n,i){switch(e){case"circle":return Object(D.jsx)(Tt,{scale:t,numberOfSymbols:n,opacity:i});case"square":return Object(D.jsx)(It,{scale:t,numberOfSymbols:n,opacity:i});case"triangle up":return Object(D.jsx)(Pt,{scale:1.1*t,numberOfSymbols:n,direction:ke.UP,opacity:i});case"triangle down":return Object(D.jsx)(Pt,{scale:1.1*t,numberOfSymbols:n,direction:ke.DOWN,opacity:i});case"triangle right":return Object(D.jsx)(Pt,{scale:1.1*t,numberOfSymbols:n,direction:ke.RIGHT,opacity:i});case"triangle left":return Object(D.jsx)(Pt,{scale:1.1*t,numberOfSymbols:n,direction:ke.LEFT,opacity:i});case"star":return Object(D.jsx)(Dt,{scale:1.25*t,numberOfSymbols:n,opacity:i});case"diamond":return Object(D.jsx)(Wt,{scale:1.1*t,numberOfSymbols:n,opacity:i});case"hexagon":return Object(D.jsx)(Ft,{scale:1.3*t,numberOfSymbols:n,opacity:i})}},Et=function(e){var t=e.type,n=e.dataSource,o=e.height,r=e.labelX,a=e.labelY,s=e.unitX,l=e.unitY,d=e.fractionDigits,h=void 0===d?2:d,j=(Object(E.a)(e,["type","dataSource","height","labelX","labelY","unitX","unitY","fractionDigits"]),Object(c.useState)(0)),b=Object(u.a)(j,2),f=b[0],x=b[1],p=Object(c.useState)(!0),O=Object(u.a)(p,2),g=O[0],m=(O[1],Object(c.useState)(!0)),v=Object(u.a)(m,2),w=v[0],S=(v[1],Object(c.useState)(null)),M=Object(u.a)(S,2),k=M[0],z=M[1],C=Object(c.useState)(2),T=Object(u.a)(C,2),I=T[0],P=(T[1],Object(c.useState)(12)),F=Object(u.a)(P,2),A=F[0],R=(F[1],Object(c.useState)(1)),V=Object(u.a)(R,2),H=V[0],G=(V[1],W((function(e){return e.date})));Object(c.useEffect)((function(){if(n){var e=Array.isArray(n)?Object.keys(n[0]).length-1:Object.keys(n).length-1;f!==e&&x(e)}}),[n]);var L=Object(c.useMemo)((function(){for(var e,n=[],o=0;o<f;o++){var r="";switch(t){case i.MonthlyTemperatures:r=0===o?"Low":"High";break;case i.SunshineHours:r="Sunshine";break;case i.HourlyTemperatures:r="Temperature"}var c=null===k||k===r?1:.25,a=At(Mt[o],H,A,c);0===o&&(e=a),n.push(Object(D.jsx)(wt.a,{type:"natural",name:r,dataKey:r,stroke:$e[o],opacity:c,strokeWidth:I,dot:A>0&&(a||e),isAnimationActive:!1},o))}return n}),[f,I,A,H,k]);return Object(D.jsx)(D.Fragment,{children:n&&Object(D.jsx)("div",{id:"line-graph-"+r+"-"+a,style:{width:"100%",height:"".concat(o,"%"),position:"relative"},children:Object(D.jsx)("div",{style:{userSelect:"none",width:"100%",height:"100%",position:"absolute",top:0,left:0},children:Object(D.jsx)(jt.a,{width:"100%",height:"100%",children:Object(D.jsxs)(St.a,{data:n,onMouseDown:function(e){},margin:{top:5,right:30,left:20,bottom:30},children:[Object(D.jsx)(ft.a,{formatter:function(e){return e.toFixed(h)+" "+l}}),Object(D.jsx)(xt.a,{vertical:w,horizontal:g,stroke:"rgba(128, 128, 128, 0.3)"}),Object(D.jsx)(pt.a,{x:et[Math.floor(y.daysIntoYear(G)/365*12)],stroke:"orange",strokeWidth:2}),Object(D.jsx)(Ot.a,{dataKey:r,children:Object(D.jsx)(gt.a,{value:r+(s?" ("+s+")":""),offset:0,position:"bottom"})}),Object(D.jsx)(mt.a,{domain:["dataMin - 5","auto"],children:Object(D.jsx)(gt.a,{dx:-15,value:a+(l?" ("+l+")":""),offset:0,angle:-90,position:"center"})}),L,f>1&&Object(D.jsx)(vt.a,{iconType:"plainline",verticalAlign:"top",height:36,onMouseLeave:function(e){z(null)},onMouseEnter:function(e){z(e.dataKey)}})]})})})})})},Rt=ue.a.div(kt||(kt=Object(le.a)(["\n  position: fixed;\n  top: 80px;\n  right: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px;\n  z-index: 9;\n"]))),Vt=ue.a.div(zt||(zt=Object(le.a)(["\n  background-color: #f8f8f8;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 500px;\n  height: 500px;\n  padding-bottom: 10px;\n  border: 2px solid gainsboro;\n  border-radius: 10px 10px 10px 10px;\n  display: flex;\n  flex-direction: column;\n"]))),Ht=ue.a.div(Ct||(Ct=Object(le.a)(["\n  border-radius: 10px 10px 0 0;\n  width: 100%;\n  height: 24px;\n  padding: 10px;\n  background-color: #e8e8e8;\n  color: #888;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  svg.icon {\n    height: 16px;\n    width: 16px;\n    padding: 8px;\n    fill: #666;\n  }\n"]))),Gt=function(e){var t=e.city,n=e.graphs,o=Object(E.a)(e,["city","graphs"]),r=W((function(e){return e.set})),a=W((function(e){return e.getWeather})),s=Object(c.useMemo)((function(){return n?Math.floor(100/n.length):100}),[n]),l=Object(c.useMemo)((function(){if(n){var e={};if(t){var o=a(t);o&&n.forEach((function(t){switch(e[t]=[],t){case i.MonthlyTemperatures:for(var n=0;n<12;n++)e[t].push({Month:et[n],Low:o.lowestTemperatures[n],High:o.highestTemperatures[n]});break;case i.SunshineHours:for(var r=0;r<12;r++)e[t].push({Month:et[r],Sunshine:o.sunshineHours[r]})}}))}return e}}),[n,t]),u=["Temperature","Temperature","Sunshine"],d=["\xb0C","\xb0C","Hours"];return Object(D.jsx)(Rt,{children:Object(D.jsxs)(Vt,{children:[Object(D.jsxs)(Ht,{children:[Object(D.jsx)("span",{children:"Weather"}),Object(D.jsx)("span",{style:{cursor:"pointer"},onClick:function(){r((function(e){e.showWeatherPanel=!1}))},children:"Close"})]}),Object(D.jsxs)(D.Fragment,{children:[n.map((function(e){return e===i.SunshineHours?Object(D.jsx)(yt,Object(A.a)({type:e,dataSource:l[e],height:s,labelX:"Month",labelY:u[e],unitY:d[e],fractionDigits:0,color:"#FFD700"},o),e):Object(D.jsx)(Et,Object(A.a)({type:e,dataSource:l[e],height:s,labelX:"Month",labelY:u[e],unitY:d[e],fractionDigits:0},o),e)})),Object(D.jsx)("div",{children:Object(D.jsx)("span",{children:t})})]})]})})},Lt=function(){var e=W((function(e){return e.set})),t=W((function(e){return e.worlds})),n=W((function(e){return e.getWorld})),o=W((function(e){return e.createNewWorld})),r=W((function(e){return e.loadWeatherData})),a=W((function(e){return e.getClosestCity})),s=W((function(e){return e.showGroundPanel})),l=W((function(e){return e.showHeliodonPanel})),h=W((function(e){return e.showWeatherPanel})),j=W((function(e){return e.axes})),b=W((function(e){return e.grid})),f=W((function(e){return e.groundImage})),p=W((function(e){return e.groundColor})),O=W((function(e){return e.theme})),g=W((function(e){return e.heliodon})),m=W((function(e){return e.latitude})),v=W((function(e){return e.longitude})),w=W((function(e){return e.weatherData})),S=new Date(W((function(e){return e.date}))),M=Object(c.useState)(0),k=Object(u.a)(M,2),z=k[0],C=k[1],T=Object(c.useState)(0),I=Object(u.a)(T,2),P=I[0],A=I[1],E=Object(c.useState)(new x.Vector3(0,2,2)),R=Object(u.a)(E,2),V=R[0],H=R[1],G=Object(c.useState)(!1),L=Object(u.a)(G,2),_=L[0],B=L[1],Y=Object(c.useState)("Boston MA, USA"),X=Object(u.a)(Y,2),U=X[0],J=X[1],q=t.default;Object(c.useEffect)((function(){n("default")||o(),r()}),[]),Object(c.useEffect)((function(){H(re(10,z,P,y.toRadians(m)).applyEuler(new x.Euler(-Math.PI/2,0,0)))}),[m,z,P]),Object(c.useEffect)((function(){J(a(m,v))}),[m,v,w]);var Q=S.toString();Object(c.useMemo)((function(){C(oe(S)),A(ie(S))}),[Q]);var $=new x.Vector3(0,0,5);q&&$.set(q.cameraPosition.x,q.cameraPosition.y,q.cameraPosition.z),console.log("x");var ne=V.y>0;return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsxs)("div",{style:{backgroundColor:"lightblue",height:"72px",paddingTop:"10px",fontSize:"30px"},children:[Object(D.jsx)("img",{alt:"Aladdin Logo",src:ae,height:"50px",style:{verticalAlign:"middle"}}),Object(D.jsx)("span",{style:{paddingLeft:"20px",verticalAlign:"middle"},children:"Aladdin"})]}),Object(D.jsxs)("div",{style:{position:"absolute",bottom:"10px",left:"10px",zIndex:999,fontSize:"12px",color:"white"},children:[Object(D.jsx)("img",{alt:"IFI Logo",src:se,height:"40px",style:{verticalAlign:"bottom",cursor:"pointer"},title:"Go to Institute for Future Intelligence",onClick:tt}),"\xa0\xa0 Institute for Future Intelligence, \xa9",(new Date).getFullYear(),". Version ","0.0.1"]}),Object(D.jsx)(Te,{}),s&&Object(D.jsx)(Ze,{grid:b,groundImage:f,groundColor:p,setGrid:function(t){e((function(e){e.grid=t}))},setGroundImage:function(t){e((function(e){e.groundImage=t}))},setGroundColor:function(t){e((function(e){e.groundColor=t}))},changeLatitude:function(t){e((function(e){e.latitude=t}))},changeLongitude:function(t){e((function(e){e.longitude=t}))},changeMapZoom:function(t){e((function(e){e.mapZoom=t}))},changeMapTilt:function(t){e((function(e){e.mapTilt=t}))},changeMapType:function(t){e((function(e){e.mapType=t}))}}),l&&Object(D.jsx)(Qe,{latitude:m,date:S,heliodon:g,animateSun:_,changeDate:function(t){var n=new Date(S);n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth()),n.setDate(t.getDate()),e((function(e){e.date=n.toString()}))},changeTime:function(t){var n=new Date(S);n.setHours(t.getHours(),t.getMinutes()),e((function(e){e.date=n.toString()}))},changeLatitude:function(t){e((function(e){e.latitude=t,e.address=""}))},setHeliodon:function(t){e((function(e){e.heliodon=t}))},setSunAnimation:function(e){B(e)}}),h&&Object(D.jsx)(Gt,{city:U,graphs:[i.MonthlyTemperatures,i.SunshineHours]}),Object(D.jsx)(je.a,{overlay:Object(D.jsx)(dt,{}),trigger:["contextMenu"],children:Object(D.jsx)("div",{children:Object(D.jsx)(d.a,{shadows:!0,camera:{position:$,fov:90},style:{height:"calc(100vh - 70px)",backgroundColor:"black"},children:Object(D.jsxs)(c.Suspense,{fallback:null,children:[Object(D.jsx)(F,{}),Object(D.jsx)("ambientLight",{intensity:.25}),Object(D.jsx)("directionalLight",{color:"white",position:[V.x,V.y,V.z],intensity:ne?.5:0,castShadow:!0,"shadow-mapSize-height":512,"shadow-mapSize-width":512}),b&&Object(D.jsx)("gridHelper",{args:[500,100,"gray","gray"]}),Object(D.jsx)(K,{}),j&&Object(D.jsx)(N,{}),Object(D.jsx)(te,{}),f&&Object(D.jsx)(ct,{}),Object(D.jsx)(Z,{theme:O,night:!ne}),g&&Object(D.jsx)(ce,{hourAngle:z,declinationAngle:P,radius:10,date:S,latitude:y.toRadians(m)}),q&&Object(D.jsx)(ee,{world:q})]})})})},"canvas-context-menu"),Object(D.jsx)(ot,{})]})},_t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,518)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),o(e),r(e),c(e)}))};l.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(Lt,{})}),document.getElementById("root")),_t()}},[[493,1,2]]]);
//# sourceMappingURL=main.57cb1622.chunk.js.map